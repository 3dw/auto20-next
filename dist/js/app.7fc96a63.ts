(function(){"use strict";var e={6808:function(e,o,t){t.d(o,{UM:function(){return p},Uq:function(){return r},db:function(){return s},pO:function(){return c},sY:function(){return d},y6:function(){return u},yA:function(){return a}});var n=t(6400),i=t(4161);const l=(0,n.Wp)({apiKey:"AIzaSyA64Lzpmdn-HovWkOvTtPFecurm9Szaxf8",authDomain:"shackhand-autolearn.firebaseapp.com",databaseURL:"https://shackhand-autolearn.firebaseio.com",projectId:"shackhand-autolearn",storageBucket:"shackhand-autolearn.appspot.com",messagingSenderId:"270389952986",appId:"1:270389952986:web:010827f42571edac5c80e3"}),a=l,s=(0,i.C3)(l),r=(0,i.KR)(s,"places"),u=(0,i.KR)(s,"users"),c=(0,i.KR)(s,"chats"),d=(0,i.KR)(s,"groups"),p=(0,i.KR)(s,"books")},8681:function(e,o,t){var n=t(5130),i=t(6768),l=t(4232);const a={class:"ui menu",id:"main-menu"},s=(0,i.Lk)("i",{class:"icon bars"},null,-1),r=[s],u=(0,i.Lk)("i",{class:"home icon"},null,-1),c=(0,i.Lk)("i",{class:"info icon"},null,-1),d=(0,i.Lk)("i",{class:"users icon"},null,-1),p=(0,i.Lk)("i",{class:"globe icon"},null,-1),h=(0,i.Lk)("i",{class:"map icon"},null,-1),f={class:"right menu"},k={class:"ui simple dropdown item"},m=["src"],g={key:1,class:"user icon"},b={class:"menu"},v=(0,i.Lk)("i",{class:"flag icon"},null,-1),L={class:"ui divider"},y=(0,i.Lk)("i",{class:"sign-out icon"},null,-1),C=["innerHTML"],_=(0,i.Lk)("i",{class:"home icon no-float"},null,-1),w=(0,i.Lk)("i",{class:"info icon no-float"},null,-1),E=(0,i.Lk)("i",{class:"save icon no-float"},null,-1),A=(0,i.Lk)("i",{class:"users icon no-float"},null,-1),U=(0,i.Lk)("i",{class:"globe icon no-float"},null,-1),x=(0,i.Lk)("i",{class:"map icon no-float"},null,-1),B=(0,i.Lk)("i",{class:"user icon no-float"},null,-1),X=(0,i.Lk)("i",{class:"marker icon no-float"},null,-1),F=(0,i.Lk)("i",{class:"book icon no-float"},null,-1),W=(0,i.Lk)("br",null,null,-1);function S(e,o,t,s,S,R){const O=(0,i.g2)("router-link"),I=(0,i.g2)("slide"),G=(0,i.g2)("carousel"),M=(0,i.g2)("router-view"),T=(0,i.g2)("chatbox");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("nav",a,[(0,i.Lk)("button",{class:"no-border ui item",onClick:o[0]||(o[0]=(...o)=>e.toggleSidebar&&e.toggleSidebar(...o))},r),(0,i.bF)(O,{class:"item",to:"/"},{default:(0,i.k6)((()=>[u,(0,i.eW)("首頁")])),_:1}),(0,i.bF)(O,{class:"item fat-only",to:"/about"},{default:(0,i.k6)((()=>[c,(0,i.eW)("說明")])),_:1}),(0,i.bF)(O,{class:"item",to:"/friends"},{default:(0,i.k6)((()=>[d,(0,i.eW)("朋友")])),_:1}),(0,i.bF)(O,{class:"item fat-only",to:"/groups"},{default:(0,i.k6)((()=>[p,(0,i.eW)("社團")])),_:1}),(0,i.bF)(O,{class:"item fat-only",to:"/maps"},{default:(0,i.k6)((()=>[h,(0,i.eW)("地圖")])),_:1}),(0,i.Lk)("div",f,[(0,i.Lk)("div",k,[e.photoURL?((0,i.uX)(),(0,i.CE)("img",{key:0,class:"ui avatar image",src:e.photoURL},null,8,m)):((0,i.uX)(),(0,i.CE)("i",g)),(0,i.Lk)("div",b,[(0,i.bF)(O,{class:"item",to:"/profile"},{default:(0,i.k6)((()=>[v,(0,i.eW)("我的旗幟")])),_:1}),(0,i.bo)((0,i.Lk)("div",L,null,512),[[n.aG,e.myGroupIdx().length>0]]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.myGroupIdx(),(o=>((0,i.uX)(),(0,i.Wv)(O,{class:"item",key:o,to:"/group/"+o},{default:(0,i.k6)((()=>[(0,i.eW)((0,l.v_)(e.groups[o].n),1)])),_:2},1032,["to"])))),128)),e.uid?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"no-border ui item",onClick:o[1]||(o[1]=(...o)=>e.logout&&e.logout(...o))},[y,(0,i.eW)("登出")])):(0,i.Q3)("",!0)])])])]),(0,i.bF)(G,{wrapAround:!0,"items-to-show":1,autoplay:4e3,transition:4e3,pauseAutoplayOnHover:!0},{addons:(0,i.k6)((()=>[])),default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.news,(e=>((0,i.uX)(),(0,i.Wv)(I,{key:e},{default:(0,i.k6)((()=>[(0,i.Lk)("span",{innerHTML:e},null,8,C)])),_:2},1024)))),128))])),_:1}),(0,i.Lk)("div",{class:(0,l.C4)(["ui sidebar vertical menu",{hidden:!e.sidebarVisible}]),id:"side-menu"},[(0,i.bF)(O,{class:"item",to:"/"},{default:(0,i.k6)((()=>[_,(0,i.eW)("首頁")])),_:1}),(0,i.bF)(O,{class:"item",to:"/about"},{default:(0,i.k6)((()=>[w,(0,i.eW)("說明")])),_:1}),(0,i.bF)(O,{class:"item",to:"/privacy-policy"},{default:(0,i.k6)((()=>[E,(0,i.eW)("隱私權政策")])),_:1}),(0,i.bF)(O,{class:"item",to:"/friends"},{default:(0,i.k6)((()=>[A,(0,i.eW)("朋友")])),_:1}),(0,i.bF)(O,{class:"item",to:"/groups"},{default:(0,i.k6)((()=>[U,(0,i.eW)("社團")])),_:1}),(0,i.bF)(O,{class:"item",to:"/maps"},{default:(0,i.k6)((()=>[x,(0,i.eW)("地圖")])),_:1}),(0,i.bF)(O,{class:"item",to:"/profile"},{default:(0,i.k6)((()=>[B,(0,i.eW)("我的旗幟")])),_:1}),(0,i.bF)(O,{class:"item",to:"/my_place"},{default:(0,i.k6)((()=>[X,(0,i.eW)("自學場地登錄")])),_:1}),e.uid?((0,i.uX)(),(0,i.Wv)(O,{key:0,class:"item",to:"/book"},{default:(0,i.k6)((()=>[F,(0,i.eW)("我的名簿")])),_:1})):(0,i.Q3)("",!0)],2),(0,i.Lk)("div",{class:(0,l.C4)(["ui sidebar bg",{hidden:!e.sidebarVisible}]),onClick:o[2]||(o[2]=(...o)=>e.toggleSidebar&&e.toggleSidebar(...o))},null,2),W,(0,i.bF)(M,{isInApp:e.isInApp,zoom:e.zoom,uid:e.uid,users:e.users,book:e.book,center:e.center,places:e.places,user:e.user,email:e.email,photoURL:e.photoURL,onLoginGoogle:e.loginGoogle,onAddBook:e.addBook,onRemoveBook:e.removeBook,onLocate:e.locate,onGetUserLocation:e.getUserLocation},null,8,["isInApp","zoom","uid","users","book","center","places","user","email","photoURL","onLoginGoogle","onAddBook","onRemoveBook","onLocate","onGetUserLocation"]),(0,i.bF)(T,{id:"ch",onLoginGoogle:e.loginGoogle,uid:e.uid,user:e.user,photoURL:e.photoURL},null,8,["onLoginGoogle","uid","user","photoURL"])],64)}t(4114);var R=t(9420),O=t.n(R),I=t(4161),G=t(6808),M=t(2621);const T=e=>((0,i.Qi)("data-v-59fd8db7"),e=e(),(0,i.jt)(),e),j={class:"ui inverted big menu",id:"menu"},H={class:"item ui form"},D={class:"ui input"},$={class:"right menu"},q=T((()=>(0,i.Lk)("i",{class:"comments icon"},null,-1))),Q=T((()=>(0,i.Lk)("i",{class:"compress icon"},null,-1))),K={id:"box"},N={class:"ui list"},P={class:"ui"},V=["src"],Z=["onClick"],z=["onClick"],Y=T((()=>(0,i.Lk)("i",{class:"edit icon",title:"edit"},null,-1))),J=[Y],ee={class:"ui form"},oe={class:"ui input"},te=["onUpdate:modelValue"],ne=["onClick"],ie={key:0,class:"item preview"},le=["src"],ae={key:1,class:"item"},se={class:"ui form"},re={class:"field"},ue=["src"],ce={class:"inline fields"},de={class:"field"},pe={class:"ui radio checkbox"},he=["value"],fe=["onClick"],ke={class:"ui button group"},me={key:2,class:"item"},ge={key:0,class:"ui big buttons"},be=T((()=>(0,i.Lk)("i",{class:"google icon"},null,-1)));function ve(e,o,t,a,s,r){const u=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",{class:(0,l.C4)(["chats",{full:e.isFull,mini:e.isMini}])},[(0,i.Lk)("div",j,[(0,i.bo)((0,i.Lk)("div",H,[(0,i.Lk)("div",D,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=o=>e.key=o),placeholder:"搜尋"},null,512),[[n.Jo,e.key]])])],512),[[n.aG,e.isFull]]),(0,i.Lk)("div",$,[e.isFull?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("a",{key:0,class:"item",onClick:o[1]||(o[1]=o=>{e.isFull=!0,e.isMini=!1,e.reCount()})},[q,(0,i.eW)("聊聊"),(0,i.bo)((0,i.Lk)("div",{class:"red note"},(0,l.v_)(e.fil(e.chats).length-e.read),513),[[n.aG,e.fil(e.chats).length>e.read]])])),e.isMini?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("a",{key:1,class:"item",onClick:o[2]||(o[2]=o=>{e.isFull=!1,e.isMini=!0})},[Q,(0,i.eW)("縮小")]))])]),(0,i.Lk)("div",K,[(0,i.Lk)("div",N,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.fil(e.chats).slice(e.fil(e.chats).length-5,e.fil(e.chats).length),((o,t)=>((0,i.uX)(),(0,i.CE)("div",{class:"item",key:o.t},[(0,i.bo)((0,i.Lk)("div",P,[(0,i.bF)(u,{to:"/flag/"+o.uid},{default:(0,i.k6)((()=>[(0,i.Lk)("img",{class:"ui avatar",src:o.photoURL||"http://graph.facebook.com/"+o.uid+"/picture",alt:"^_^"},null,8,V)])),_:2},1032,["to"]),(0,i.Lk)("a",{onClick:t=>e.key=o.l,class:(0,l.C4)(o.l)},"["+(0,l.v_)(o.l)+"]",11,Z),(0,i.bo)((0,i.Lk)("a",{onClick:t=>e.edit=o},J,8,z),[[n.aG,o.uid==e.uid]]),(0,i.eW)((0,l.v_)(o.n)+" : "+(0,l.v_)(o.t),1),(0,i.bo)((0,i.Lk)("span",{class:"gray"},"  -"+(0,l.v_)(e.countDateDiff(o.time)),513),[[n.aG,e.isFull]])],512),[[n.aG,e.edit!==o]]),(0,i.bo)((0,i.Lk)("div",ee,[(0,i.Lk)("div",oe,[(0,i.bo)((0,i.Lk)("input",{class:"input","onUpdate:modelValue":e=>o.t=e,placeholder:"更新"},null,8,te),[[n.Jo,o.t]]),(0,i.Lk)("a",{class:"ui green small button",onClick:t=>{e.edit="",e.updateChat(o)}},"更新",8,ne)])],512),[[n.aG,e.edit==o]])])))),128)),e.p.t?((0,i.uX)(),(0,i.CE)("div",ie,[(0,i.bF)(u,{to:"/flag/"+e.p.uid},{default:(0,i.k6)((()=>[(0,i.Lk)("img",{class:"ui avatar",src:e.p.photoURL||"/static/img/handshake0.png"},null,8,le)])),_:1},8,["to"]),(0,i.Lk)("a",{onClick:o[3]||(o[3]=o=>e.key=e.p.l),class:(0,l.C4)(e.p.l)},"["+(0,l.v_)(e.p.l)+"] (預覽)",3),(0,i.eW)((0,l.v_)(e.p.n)+" : "+(0,l.v_)(e.p.t),1),(0,i.bo)((0,i.Lk)("span",{class:"gray"},"  -"+(0,l.v_)(e.countDateDiff(e.p.time)),513),[[n.aG,e.isFull]])])):(0,i.Q3)("",!0),e.uid?((0,i.uX)(),(0,i.CE)("div",ae,[(0,i.Lk)("div",se,[(0,i.Lk)("div",re,[(0,i.Lk)("img",{class:"ui avatar",src:e.photoURL},null,8,ue),(0,i.bo)((0,i.Lk)("input",{class:"input","onUpdate:modelValue":o[4]||(o[4]=o=>e.msg=o),placeholder:"在想什麼嗎?",autofocus:""},null,512),[[n.Jo,e.msg]])]),(0,i.Lk)("div",ce,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.labels,(t=>((0,i.uX)(),(0,i.CE)("div",de,[(0,i.Lk)("div",pe,[(0,i.bo)((0,i.Lk)("input",{type:"radio",name:"l","onUpdate:modelValue":o[5]||(o[5]=o=>e.label=o),value:t},null,8,he),[[n.XL,e.label]]),(0,i.Lk)("label",null,[(0,i.Lk)("a",{onClick:o=>e.label=t,class:(0,l.C4)(t)},(0,l.v_)(t),11,fe)])])])))),256)),(0,i.Lk)("div",ke,[(0,i.Lk)("a",{class:"ui blue small button",onClick:o[6]||(o[6]=(...o)=>e.preview&&e.preview(...o))},"預覽"),(0,i.Lk)("a",{class:"ui green small button",onClick:o[7]||(o[7]=(...o)=>e.addChat&&e.addChat(...o))},"留言")])])])])):((0,i.uX)(),(0,i.CE)("div",me,[e.uid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ge,[(0,i.Lk)("button",{class:"ui orange button",onClick:o[8]||(o[8]=o=>e.loginGoogle())},[be,(0,i.eW)("登入以留言 ")])]))]))])])],2)}var Le=t(8632),ye=(0,i.pM)({name:"ChatBox",mixins:[Le.A],props:["uid","user","photoURL"],data(){return{p:"",msg:"",key:"",edit:"",chats:[],read:0,isFull:!1,isMini:!0,label:"閒聊",labels:["諮詢","故障","找伴","閒聊"]}},methods:{preview(){var e={uid:this.uid,n:this.user.providerData[0].displayName,t:this.msg,l:this.label,edit:!1,photoURL:this.photoURL||"",time:(new Date).getTime()};this.p=e},updateChat(e){var o={uid:e.uid,n:e.n,t:e.t,l:e.l,photoURL:e.photoURL||"",time:(new Date).getTime()};this.chats[e[".key"]]=o,(0,I.hZ)((0,I.KR)(G.db,"chats"),this.chats).then(console.log("chats更新成功"))},addChat(){var e={uid:this.uid,n:this.user.providerData[0].displayName,t:this.msg,l:this.label,photoURL:this.photoURL||"",time:(new Date).getTime()};if(this.msg){const o=(Math.random()+"").substr(0,8).replace(".","");this.chats[o]=e,this.msg="",this.p=""}(0,I.hZ)((0,I.KR)(G.db,"chats"),this.chats).then(console.log("chats更新成功"))},loginGoogle(){this.$emit("loginGoogle")},fil(e){var o=this.key;const t=Object.keys(e);for(var n=[],i=0;i<t.length;i++)n.push(e[t[i]]);return n=n.filter((function(e){return(e.t+e.l).indexOf(o)>-1||!o})).map((function(e){return e.edit=!1,e})),n.sort((function(e,o){return e.time-o.time})),n},reCount(){this.read=this.fil(this.chats).length,localStorage.setItem("read",this.read)}},mounted(){(0,I.Zy)(G.pO,(e=>{const o=e.val();this.chats=o})),this.read=localStorage.getItem("read")||0,"undefined"===this.read&&(this.read=0)}}),Ce=t(1241);const _e=(0,Ce.A)(ye,[["render",ve],["__scopeId","data-v-59fd8db7"]]);var we=_e,Ee=t(1114);const Ae=new(O())(window.navigator.userAgent),Ue=(0,M.xI)(G.yA),xe=new M.HF;xe.addScope("https://www.googleapis.com/auth/userinfo.email");var Be=(0,i.pM)({name:"WeLearn",components:{Carousel:Ee.FN,Slide:Ee.q7,Pagination:Ee.dK,Navigation:Ee.Vx,Chatbox:we},data(){return{news:["自學2.0更新中","請定期更新您的互助旗","兩年以上未更新之旗幟將被系統移除",'任何建議與錯誤回報，請上此<a href="https://github.com/3dw/auto20-next/issues" target="_blank" rel="noopener noreferrer">議題區</a>'],zoom:7,center:[22.61322,121.219482],sidebarVisible:!1,users:null,book:[],books:[],user:null,email:null,uid:"",photoURL:null,isInApp:Ae.isInApp,groups:null,places:null}},mounted(){const e=this;console.log(e.isInApp),(0,I.Zy)(G.y6,(o=>{const t=o.val();e.users=t})),(0,I.Zy)(G.Uq,(o=>{const t=o.val();e.places=t})),(0,I.Zy)(G.sY,(o=>{const t=o.val();e.groups=t})),(0,I.Zy)(G.UM,(o=>{console.log("get books");const t=o.val()||{};e.books=t}))},watch:{$route(e,o){console.log(o.path),console.log(e.path)},center(e,o){console.log("Center updated from",o,"to",e)},uid(e){e&&(this.book=this.books[e],console.log(this.book),this.$nextTick((()=>{console.log("Book updated and propagated to children")})))}},methods:{myGroupIdx(){return(this.groups||[]).filter((e=>(e.members||[]).indexOf(this.uid||"")>-1)).map((function(e){return e.idx}))},locate:function(e,o){this.zoom=13,this.center=e.latlngColumn.split(","),console.log("Updated location:",this.center),this.$nextTick((()=>{console.log("Center updated and propagated to children")})),o&&this.$router.push({path:"/maps"})},getUserLocation:function(){console.log("try getUserLocation"),navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{this.center=[e.coords.latitude,e.coords.longitude],console.log("Updated location:",this.center),this.$nextTick((()=>{console.log("Center updated and propagated to children")}))}),(e=>{console.error("Error getting location:",e)})):console.error("Geolocation is not supported by this browser.")},toggleSidebar(){console.log("toggleSidebar"),this.sidebarVisible=!this.sidebarVisible},setLocal:function(e){console.log("set:"+e),"book"==e&&localStorage.setItem(e,JSON.stringify(this.book))},addBook:function(e){-1===this.book.indexOf(e)&&(this.book.push(e),(0,I.hZ)((0,I.KR)(G.db,"books/"+this.uid),this.book))},removeBook:function(e){window.prompt("確定要將這位朋友移出您的名簿嗎？")&&(this.book.splice(e,1),(0,I.hZ)((0,I.KR)(G.db,"books/"+this.uid),this.book))},logout(){const e=this;Ue.signOut().then((function(){e.user=null,e.uid="",e.photoURL="",console.log(e.$router),e.$router.push("/")}))},loginGoogle:function(){const e=this;this.isInApp?window.alert("本系統不支援facebook, link等app內部瀏覽，請用一般瀏覽器開啟，方可登入，謝謝"):(0,M.df)(Ue,xe).then((o=>{const t=o.user;e.user=t,e.email=t.providerData[0].email,e.uid=t.uid,t.photoURL?e.photoURL=decodeURI(t.photoURL):e.photoURL=null,e.uid&&e.users[e.uid]&&(e.user=e.users[e.uid]),e.uid&&e.users[e.uid]&&e.users[e.uid].latlngColumn&&this.locate(e.users[e.uid],!1)}))}}});const Xe=(0,Ce.A)(Be,[["render",S]]);var Fe=Xe,We=t(1387);const Se={class:"home"};function Re(e,o,t,n,l,a){const s=(0,i.g2)("HelloWorld");return(0,i.uX)(),(0,i.CE)("div",Se,[(0,i.bF)(s,{uid:e.uid,users:e.users,places:e.places,book:e.book,isInApp:e.isInApp,onAddBook:e.addBook,onRemoveBook:e.removeBook,onLoginGoogle:e.loginGoogle},null,8,["uid","users","places","book","isInApp","onAddBook","onRemoveBook","onLoginGoogle"])])}const Oe=e=>((0,i.Qi)("data-v-320132cd"),e=e(),(0,i.jt)(),e),Ie=Oe((()=>(0,i.Lk)("div",{class:"hello"},[(0,i.Lk)("h4",{class:"ui header"},"請先登入，升起互助旗，和各位朋友相互認識")],-1))),Ge=Oe((()=>(0,i.Lk)("br",null,null,-1))),Me={class:"ui huge buttons"},Te=Oe((()=>(0,i.Lk)("div",{class:"ui divider"},null,-1))),je={key:0},He=Oe((()=>(0,i.Lk)("div",{class:"ui divider"},null,-1))),De={key:1},$e={key:2,class:"ui two doubling cards container"};function qe(e,o,t,n,a,s){const r=(0,i.g2)("router-link"),u=(0,i.g2)("card"),c=(0,i.g2)("loader");return(0,i.uX)(),(0,i.CE)(i.FK,null,[Ie,Ge,(0,i.Lk)("div",Me,[(0,i.bF)(r,{class:"ui purple button",to:"/about"},{default:(0,i.k6)((()=>[(0,i.eW)("瞭解更多")])),_:1}),e.user&&e.user.uid?((0,i.uX)(),(0,i.Wv)(r,{key:1,class:"ui blue button",to:"/profile"},{default:(0,i.k6)((()=>[(0,i.eW)("前往我的旗幟")])),_:1})):((0,i.uX)(),(0,i.Wv)(r,{key:0,class:(0,l.C4)(["ui orange button",{disabled:e.isInApp}]),to:"/profile"},{default:(0,i.k6)((()=>[(0,i.eW)("登入")])),_:1},8,["class"]))]),Te,e.isInApp?((0,i.uX)(),(0,i.CE)("p",je,[(0,i.eW)("本系統不支援facebook, link等app內部瀏覽，請用一般瀏覽器開啟，方可登入，謝謝"),He])):(0,i.Q3)("",!0),e.users&&e.toList(e.users).length>0?((0,i.uX)(),(0,i.CE)("h2",De,"最近更新")):(0,i.Q3)("",!0),e.toList(e.users).length>0?((0,i.uX)(),(0,i.CE)("div",$e,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.ordered_list.slice(0,2),((o,t)=>((0,i.uX)(),(0,i.CE)("div",{class:"ui card",key:t},[(0,i.bF)(u,{h:o,full:!0,mySearch:e.mySearch,uid:e.uid,book:e.book,onLocate:e.locate,onAddBook:e.addBook,onRemoveBook:e.removeBook,onLoginGoogle:e.loginGoogle},null,8,["h","mySearch","uid","book","onLocate","onAddBook","onRemoveBook","onLoginGoogle"])])))),128))])):((0,i.uX)(),(0,i.Wv)(c,{key:3}))],64)}var Qe=t(538),Ke=t(4088),Ne=(0,i.pM)({name:"HelloWorld",components:{Card:Qe.A,Loader:Ke.A},props:{uid:{type:String,required:!1,default:()=>""},user:{type:Object,required:!1,default:()=>({})},users:{type:Object,required:!1,default:()=>({})},places:{type:Object,required:!1,default:()=>({})},book:{type:Array,required:!1,default:()=>[]},mySearch:{type:String,required:!1,default:()=>""},isInApp:{type:Boolean,required:!0}},emits:["addBook","removeBook","locate","loginGoogle"],computed:{ordered_list(){function e(e){return e&&"object"===typeof e?Object.values(e):[]}const o=e(this.users).concat(e(this.places)).slice().sort(((e,o)=>!o.lastUpdate||isNaN(o.lastUpdate)?-1:o.lastUpdate-e.lastUpdate));return o||[]}},methods:{toList:e=>e&&"object"===typeof e?Object.values(e):[],addBook:function(e){console.log(e),this.$emit("addBook",e)},removeBook:function(e){console.log(e),this.$emit("removeBook",e)},locate:function(e){this.$emit("locate",e)},loginGoogle:function(){this.$emit("loginGoogle")}}});const Pe=(0,Ce.A)(Ne,[["render",qe],["__scopeId","data-v-320132cd"]]);var Ve=Pe,Ze=(0,i.pM)({name:"HomeView",components:{HelloWorld:Ve},props:{uid:{type:String,required:!1,default:()=>""},users:{type:Object,required:!1,default:()=>({})},places:{type:Object,required:!1,default:()=>({})},book:{type:Array,required:!1,default:()=>[]},mySearch:{type:String,required:!1,default:()=>""},isInApp:{type:Boolean,required:!0}},emits:["addBook","removeBook","locate","loginGoogle"],methods:{addBook:function(e){console.log(e),this.$emit("addBook",e)},removeBook:function(e){console.log(e),this.$emit("removeBook",e)},locate:function(e){this.$emit("locate",e)},loginGoogle:function(){this.$emit("loginGoogle")}}});const ze=(0,Ce.A)(Ze,[["render",Re]]);var Ye=ze;const Je=[{path:"/",name:"home",component:Ye},{path:"/about",name:"about",component:()=>t.e(594).then(t.bind(t,3007))},{path:"/privacy-policy",name:"privacy-policy",component:()=>t.e(928).then(t.bind(t,252))},{path:"/profile",name:"profile",component:()=>Promise.all([t.e(886),t.e(138)]).then(t.bind(t,4505))},{path:"/flag/:uid",name:"Flag",component:()=>t.e(5).then(t.bind(t,7673))},{path:"/friends",name:"friends",component:()=>t.e(594).then(t.bind(t,875))},{path:"/maps",name:"maps",component:()=>Promise.all([t.e(886),t.e(522)]).then(t.bind(t,3435))},{path:"/groups",name:"groups",component:()=>t.e(583).then(t.bind(t,9374))},{path:"/group/:idx",name:"group",component:()=>t.e(583).then(t.bind(t,4526))},{path:"/book",name:"book",component:()=>t.e(952).then(t.bind(t,6775))},{path:"/my_place",name:"my_place",component:()=>Promise.all([t.e(886),t.e(246)]).then(t.bind(t,5862))}],eo=(0,We.aE)({history:(0,We.Bt)(),routes:Je});var oo=eo,to=t(8355),no=t(6942);const io=(0,n.Ef)(Fe);io.use(no.A,to.A),io.use(oo),io.mount("#app")},8632:function(e,o){o.A={methods:{part:function(e){return String(e).substring(0,50)},toAge:function(e){var o=(new Date).getFullYear();return o-parseInt(e)},highlight:function(e,o){var t,n,i,l;if(!e)return"";if(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/&lt;\s*br\/?\s*&gt;/g,"<br/>"),!o)return e;if("$"===o.substr(0,1))return e;for(t=o.split(/\s+/g),n=0,i=t.length;n<i;++n)l=t[n],e=e.replace(new RegExp(l,"gi"),'<span class="highlightedText">$&</span>');return e},getIcon:function(e){return e&&e.photoURL?e.photoURL:"https://www.moedict.tw/"+e.name+".png"},countDateDiff:function(e){var o;return e?(o=new Date(e).toLocaleDateString(),o):""},makeHref:function(e){var o;return e?(o=""+e,-1===e.indexOf("http://")&&(o="http://"+e),o=o.replace("https://",""),o):""},badAge:function(e){var o;return!!e&&(o=(new Date).getFullYear()-parseInt(e),isNaN(o))},isValid:function(e){return e&&e.name&&e.share&&e.learner_habit&&e.note&&e.address&&!("undefined,undefined"===e.latlngColumn)&&!("36.778261,-119.4179324"===e.latlngColumn)&&e.connect_me},asValid:function(e){return e&&e.name&&e.note&&e.note.length>=20&&e.address&&!("undefined,undefined"===e.latlngColumn)&&!("36.778261,-119.4179324"===e.latlngColumn)},searchBy:function(e,o){const t=Object.keys(e),n=t.map((function(o){return e[o]}));if(!n)return[];o||(o="");for(var i=function(e){var o=(new Date).getFullYear();return o-parseInt(e)},l=o.split(/[\s&]+/g),a=n,s=0;s<l.length;s++){var r,u,c=l[s];[r,u]=c.split(/[~-]/),c.match(/(\d+)[~-](\d+)/)?a=a.filter((function(e){return(i(e.learner_birth)<=u&&i(e.learner_birth))>=r||i(e.child_birth)<=u&&i(e.child_birth)>=r||i(e.child_birth2)<=u&&i(e.child_birth2)>=r})):c.match(/(\d+)\+/)?(r=c.split("+")[0],a=a.filter((function(e){return i(e.learner_birth)>=r||i(e.child_birth)>=r||i(e.child_birth2)>=r}))):c.match(/(\d+)-/)?(u=c.split("-")[0],a=a.filter((function(e){return i(e.learner_birth)<=u||i(e.child_birth)<=u||i(e.child_birth2)<=u}))):a=a.filter((function(e){return!!e.name&&(e.name+e.address+e.note+e.freetime+e.learner_habit+e.share+e.ask+e.id).indexOf(c)>-1}))}return a.sort((function(e,o){return e.lastUpdate||(e.lastUpdate=0),o.lastUpdate||(o.lastUpdate=0),o.lastUpdate-e.lastUpdate})),a}}}},538:function(e,o,t){t.d(o,{A:function(){return Y}});var n=t(6768),i=t(4232),l=t(5130);const a=e=>((0,n.Qi)("data-v-b2be967c"),e=e(),(0,n.jt)(),e),s={class:"hello"},r={class:"image"},u={class:"ui header"},c=["src"],d={key:0},p=["innerHTML"],h={key:1},f={key:2},k={key:3},m={class:"content"},g={class:"description gray"},b=["innerHTML"],v=["innerHTML"],L=["innerHTML"],y=["innerHTML"],C=["innerHTML"],_={key:0,class:"content"},w=a((()=>(0,n.Lk)("div",{class:"ui divider"},null,-1))),E={class:"descrtpion"},A={key:0,class:"descrtpion"},U={class:"content"},x=a((()=>(0,n.Lk)("div",{class:"ui divider"},null,-1))),B={key:0},X=["src"],F=a((()=>(0,n.Lk)("i",{class:"right arrow icon"},null,-1))),W={key:1},S=["src"],R=a((()=>(0,n.Lk)("i",{class:"right arrow icon"},null,-1))),O={class:"content"},I=a((()=>(0,n.Lk)("div",{class:"ui divider"},null,-1))),G={key:0,class:"descrtpion"},M=["innerHTML"],T={key:1,class:"descrtpion"},j=["innerHTML"],H=a((()=>(0,n.Lk)("div",{class:"filler"},null,-1))),D={class:"ui bottom attached buttons"},$=a((()=>(0,n.Lk)("i",{class:"book icon"},null,-1))),q=a((()=>(0,n.Lk)("i",{class:"book icon"},null,-1))),Q=a((()=>(0,n.Lk)("i",{class:"book icon"},null,-1))),K=a((()=>(0,n.Lk)("i",{class:"map icon"},null,-1)));function N(e,o,t,a,N,P){const V=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.bF)(V,{to:"/flag/"+e.h.uid},{default:(0,n.k6)((()=>[(0,n.Lk)("div",r,[(0,n.Lk)("h3",u,[(0,n.Lk)("img",{class:"main",src:e.getIcon(e.h),alt:"^_^"},null,8,c),(0,n.eW)((0,i.v_)(e.h.name),1),e.h.learner_birth?((0,n.uX)(),(0,n.CE)("span",d,[(0,n.eW)("-"),(0,n.Lk)("span",{innerHTML:e.toAge(e.h.learner_birth)},null,8,p),(0,n.eW)("歲")])):(0,n.Q3)("",!0),e.h.child_birth?((0,n.uX)(),(0,n.CE)("span",h,"(孩子")):(0,n.Q3)("",!0),e.h.child_birth2?((0,n.uX)(),(0,n.CE)("span",f,(0,i.v_)(e.toAge(e.h.child_birth2))+" ~",1)):(0,n.Q3)("",!0),e.h.child_birth?((0,n.uX)(),(0,n.CE)("span",k,(0,i.v_)(e.toAge(e.h.child_birth))+" 歲)",1)):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",m,[(0,n.Lk)("p",g,[(0,n.Lk)("span",{innerHTML:e.highlight(e.h.address,e.mySearch)},null,8,b),(0,n.eW)("   - "+(0,i.v_)(e.countDateDiff(e.h.lastUpdate))+"已更新",1)]),e.h.learner_habit&&e.full?((0,n.uX)(),(0,n.CE)("p",{key:0,class:"description",innerHTML:"興趣： "+e.highlight(e.h.learner_habit,e.mySearch)},null,8,v)):(0,n.Q3)("",!0),e.h.share?((0,n.uX)(),(0,n.CE)("p",{key:1,class:"description",innerHTML:"可分享： "+e.highlight(e.h.share,e.mySearch)},null,8,L)):(0,n.Q3)("",!0),e.h.ask?((0,n.uX)(),(0,n.CE)("p",{key:2,class:"description",innerHTML:"尋找： "+e.highlight(e.h.ask,e.mySearch)},null,8,y)):(0,n.Q3)("",!0),e.h.price?((0,n.uX)(),(0,n.CE)("p",{key:3,class:"description",innerHTML:"可支付： "+e.highlight(e.h.price,e.mySearch)},null,8,C)):(0,n.Q3)("",!0)]),e.h.connect_me&&e.full?((0,n.uX)(),(0,n.CE)("div",_,[w,(0,n.Lk)("p",E,"連絡方式： "+(0,i.v_)(e.h.connect_me),1),e.h.freetime?((0,n.uX)(),(0,n.CE)("p",A,"有空時間： "+(0,i.v_)(e.h.freetime),1)):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),(0,n.Lk)("div",U,[x,e.h.site?((0,n.uX)(),(0,n.CE)("p",B,[(0,n.Lk)("a",{onClick:o[0]||(o[0]=(0,l.D$)((o=>e.goto(e.h.site)),["stop"]))},[(0,n.eW)("個人網址："),(0,n.Lk)("img",{src:"https://www.google.com/s2/favicons?domain="+e.h.site,title:"個人網址",alt:"個人網址"},null,8,X),F])])):(0,n.Q3)("",!0),e.h.site2?((0,n.uX)(),(0,n.CE)("p",W,[(0,n.Lk)("a",{onClick:o[1]||(o[1]=(0,l.D$)((o=>e.goto(e.h.site2)),["stop"]))},[(0,n.eW)("社群網址："),(0,n.Lk)("img",{src:"https://www.google.com/s2/favicons?domain="+e.h.site2,title:"社群網址",alt:"個人網址"},null,8,S),R])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",O,[I,e.full?((0,n.uX)(),(0,n.CE)("p",T,[(0,n.Lk)("span",{class:"text",innerHTML:e.highlight(e.h.note,e.mySearch)},null,8,j)])):((0,n.uX)(),(0,n.CE)("p",G,[(0,n.Lk)("span",{class:"text",innerHTML:e.highlight(e.part(e.h.note),e.mySearch)+"..."},null,8,M)]))])])),_:1},8,["to"]),H,(0,n.Lk)("div",D,[!e.uid||e.book&&-1!=e.book.indexOf(e.h.uid||e.h.idx)?e.uid&&e.book&&e.book.indexOf(e.h.uid||e.h.idx)>-1?((0,n.uX)(),(0,n.CE)("div",{key:1,class:"ui red basic button",onClick:o[3]||(o[3]=o=>e.removeBook(e.book.indexOf(e.h.uid||e.h.idx)))},[q,(0,n.eW)("從名簿移除")])):((0,n.uX)(),(0,n.Wv)(V,{key:2,class:"ui blue basic button",to:"/profile"},{default:(0,n.k6)((()=>[Q,(0,n.eW)("註冊帳號以建立名簿")])),_:1})):((0,n.uX)(),(0,n.CE)("div",{key:0,class:"ui green basic button",onClick:o[2]||(o[2]=o=>e.addBook(e.h.uid||e.h.idx))},[$,(0,n.eW)("加入名簿")])),(0,n.Lk)("div",{class:"ui pink basic button",onClick:o[4]||(o[4]=o=>e.locate(e.h,!0))},[K,(0,n.eW)("地圖檢視")])])])}var P=t(8632),V=(0,n.pM)({name:"NameCard",mixins:[P.A],props:{h:{type:Object,required:!0},mySearch:{type:String,required:!1,default:()=>""},full:{type:Boolean,required:!1,default:()=>!1},uid:{type:String,required:!1,default:()=>""},book:{type:Array,required:!1,default:()=>[]}},data(){return{}},methods:{goto(e){window.open(e)},locate:function(e){console.log(e),this.$emit("locate",e)},addBook:function(e){console.log(e),this.$emit("addBook",e)},removeBook:function(e){console.log(e),this.$emit("removeBook",e)},loginGoogle:function(){this.$emit("loginGoogle")}}}),Z=t(1241);const z=(0,Z.A)(V,[["render",N],["__scopeId","data-v-b2be967c"]]);var Y=z},4088:function(e,o,t){t.d(o,{A:function(){return d}});var n=t(6768);const i={class:"hello"},l=(0,n.Lk)("div",{class:"ui active inverted dimmer"},[(0,n.Lk)("div",{class:"ui big text loader"},"Loading...")],-1),a=[l];function s(e,o,t,l,s,r){return(0,n.uX)(),(0,n.CE)("div",i,a)}var r=(0,n.pM)({name:"LoaderComponent",data(){return{}},methods:{}}),u=t(1241);const c=(0,u.A)(r,[["render",s]]);var d=c}},o={};function t(n){var i=o[n];if(void 0!==i)return i.exports;var l=o[n]={id:n,loaded:!1,exports:{}};return e[n].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}t.m=e,function(){t.amdO={}}(),function(){var e=[];t.O=function(o,n,i,l){if(!n){var a=1/0;for(c=0;c<e.length;c++){n=e[c][0],i=e[c][1],l=e[c][2];for(var s=!0,r=0;r<n.length;r++)(!1&l||a>=l)&&Object.keys(t.O).every((function(e){return t.O[e](n[r])}))?n.splice(r--,1):(s=!1,l<a&&(a=l));if(s){e.splice(c--,1);var u=i();void 0!==u&&(o=u)}}return o}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[n,i,l]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(o,n){return t.f[n](e,o),o}),[]))}}(),function(){t.u=function(e){return"js/"+({5:"flag",138:"profile",246:"myplace",522:"maps",583:"groups",594:"about",928:"privacy-policy",952:"book"}[e]||e)+"."+{5:"bf95be6f",138:"a1dfd951",246:"7341497c",522:"02f79434",583:"c8b13b8e",594:"ad431afd",886:"5a0ec73d",928:"a5e74d27",952:"6863053a"}[e]+".js"}}(),function(){t.miniCssF=function(e){return"css/"+{5:"flag",138:"profile",246:"myplace",522:"maps",583:"groups",594:"about",928:"privacy-policy",952:"book"}[e]+"."+{5:"3ad66690",138:"439804cc",246:"58cc5f78",522:"de35f53a",583:"9bd27289",594:"8f8d65bf",928:"c38011ff",952:"057e8b16"}[e]+".css"}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){var e={},o="auto20-next:";t.l=function(n,i,l,a){if(e[n])e[n].push(i);else{var s,r;if(void 0!==l)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==o+l){s=d;break}}s||(r=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,t.nc&&s.setAttribute("nonce",t.nc),s.setAttribute("data-webpack",o+l),s.src=n),e[n]=[i];var p=function(o,t){s.onerror=s.onload=null,clearTimeout(h);var i=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(t)})),o)return o(t)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),r&&document.head.appendChild(s)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){t.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,o,n,i,l){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",t.nc&&(a.nonce=t.nc);var s=function(t){if(a.onerror=a.onload=null,"load"===t.type)i();else{var n=t&&t.type,s=t&&t.target&&t.target.href||o,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+": "+s+")");r.name="ChunkLoadError",r.code="CSS_CHUNK_LOAD_FAILED",r.type=n,r.request=s,a.parentNode&&a.parentNode.removeChild(a),l(r)}};return a.onerror=a.onload=s,a.href=o,n?n.parentNode.insertBefore(a,n.nextSibling):document.head.appendChild(a),a},o=function(e,o){for(var t=document.getElementsByTagName("link"),n=0;n<t.length;n++){var i=t[n],l=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(l===e||l===o))return i}var a=document.getElementsByTagName("style");for(n=0;n<a.length;n++){i=a[n],l=i.getAttribute("data-href");if(l===e||l===o)return i}},n=function(n){return new Promise((function(i,l){var a=t.miniCssF(n),s=t.p+a;if(o(a,s))return i();e(n,s,null,i,l)}))},i={524:0};t.f.miniCss=function(e,o){var t={5:1,138:1,246:1,522:1,583:1,594:1,928:1,952:1};i[e]?o.push(i[e]):0!==i[e]&&t[e]&&o.push(i[e]=n(e).then((function(){i[e]=0}),(function(o){throw delete i[e],o})))}}}(),function(){var e={524:0};t.f.j=function(o,n){var i=t.o(e,o)?e[o]:void 0;if(0!==i)if(i)n.push(i[2]);else{var l=new Promise((function(t,n){i=e[o]=[t,n]}));n.push(i[2]=l);var a=t.p+t.u(o),s=new Error,r=function(n){if(t.o(e,o)&&(i=e[o],0!==i&&(e[o]=void 0),i)){var l=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+o+" failed.\n("+l+": "+a+")",s.name="ChunkLoadError",s.type=l,s.request=a,i[1](s)}};t.l(a,r,"chunk-"+o,o)}},t.O.j=function(o){return 0===e[o]};var o=function(o,n){var i,l,a=n[0],s=n[1],r=n[2],u=0;if(a.some((function(o){return 0!==e[o]}))){for(i in s)t.o(s,i)&&(t.m[i]=s[i]);if(r)var c=r(t)}for(o&&o(n);u<a.length;u++)l=a[u],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(c)},n=self["webpackChunkauto20_next"]=self["webpackChunkauto20_next"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],(function(){return t(8681)}));n=t.O(n)})();
//# sourceMappingURL=app.7fc96a63.js.map