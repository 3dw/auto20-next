"use strict";(self["webpackChunkauto20_next"]=self["webpackChunkauto20_next"]||[]).push([[138],{7984:function(e,l,o){o.r(l),o.d(l,{default:function(){return ul}});var t=o(6768),a=o(5130),i=o(4232);const s=e=>((0,t.Qi)("data-v-4bc250b2"),e=e(),(0,t.jt)(),e),r={class:"hello"},n={key:0},d=s((()=>(0,t.Lk)("div",{class:"ui divider"},null,-1))),u={key:2,class:"ui huge buttons"},c=s((()=>(0,t.Lk)("i",{class:"google icon"},null,-1))),k={key:3,class:"ui container"},h={class:"ui warning message"},p=s((()=>(0,t.Lk)("div",{class:"header"},"請立即更新",-1))),m={key:0},L={key:1},b={class:"ui form error warning success",id:"main-form"},g=s((()=>(0,t.Lk)("h2",{class:"ui header"},"請填表",-1))),v=s((()=>(0,t.Lk)("div",{class:"sub header"},[(0,t.eW)("為了讓人真的能找到夥伴"),(0,t.Lk)("br"),(0,t.eW)("有標記紅色星號"),(0,t.Lk)("i",{class:"red star"}),(0,t.eW)("的欄位為必填")],-1))),f=s((()=>(0,t.Lk)("h4",{class:"ui dividing header"},"關於我",-1))),_={class:"field"},y=s((()=>(0,t.Lk)("label",{class:"required"},"名字",-1))),w=s((()=>(0,t.Lk)("label",{class:"required"},"概略地址",-1))),C={class:"ui error message"},x=s((()=>(0,t.Lk)("div",{class:"header"},"無法定位",-1))),G=s((()=>(0,t.Lk)("p",null,[(0,t.eW)("如果您有不只一個住處，請填寫一個就好，其他可寫進自我介紹中。"),(0,t.Lk)("br"),(0,t.eW)("若持續無法定位，請"),(0,t.Lk)("a",{href:"https://www.google.com.tw/chrome/browser/desktop/",target:"_blank"},"使用Chrome瀏覽器"),(0,t.eW)("再試一次。")],-1))),U=[x,G],W={class:"ui warning message"},V=s((()=>(0,t.Lk)("div",{class:"header"},"地址重疊",-1))),F=s((()=>(0,t.Lk)("p",null,"有別人使用了這個地址。您可以加上村里或是路段，來使定位更精準",-1))),J=[V,F],A={class:"ui warning message"},I=s((()=>(0,t.Lk)("div",{class:"header"},"地址太詳細了",-1))),T=s((()=>(0,t.Lk)("p",null,"這是公開資料，最細寫到路段即可，請不要寫出門牌號碼。",-1))),X=[I,T],D={class:"ui header"},E={class:"sub header"},$=s((()=>(0,t.Lk)("div",{id:"map",style:{height:"300px"}},null,-1))),M=s((()=>(0,t.Lk)("div",{class:"ui divider"},null,-1))),Q={class:"field"},j=s((()=>(0,t.Lk)("label",null,"網址",-1))),q={class:"two fields"},R={class:"field"},S=["href"],K=["src"],N={class:"field"},O=["href"],Z=["src"],B={class:"two fields"},P={class:"field"},z=s((()=>(0,t.Lk)("label",{class:"required"},"有效聯絡方式",-1))),H={class:"field"},Y=s((()=>(0,t.Lk)("label",null,"比較有空的時段",-1))),ee=s((()=>(0,t.Lk)("h4",{class:"ui dividing header"},"社交資訊",-1))),le={class:"field"},oe=s((()=>(0,t.Lk)("label",null,"您的身份",-1))),te=s((()=>(0,t.Lk)("option",{value:""}," -- 選擇一種自學身份 -- ",-1))),ae=["selected","value"],ie={class:"field"},se=s((()=>(0,t.Lk)("label",null,"主要的自學型態",-1))),re=s((()=>(0,t.Lk)("option",{value:""}," -- 遇擇一種自學型態 -- ",-1))),ne=["selected","value"],de=s((()=>(0,t.Lk)("label",{class:"required"},"您的出生年次(西元)",-1))),ue={class:"ui warning message"},ce=s((()=>(0,t.Lk)("div",{class:"header"},"請填出生年份",-1))),ke=s((()=>(0,t.Lk)("p",null,"這是為了尋友用，如果您不願意填真實年份，可以增減1~2歲。",-1))),he=[ce,ke],pe={class:"ui error message"},me=s((()=>(0,t.Lk)("div",{class:"header"},"無法計算年歲",-1))),Le=s((()=>(0,t.Lk)("p",null," 出生年(西元)的欄位僅能填寫數字喔",-1))),be=[me,Le],ge={class:"field"},ve=s((()=>(0,t.Lk)("label",null,"孩子的出生年次(西元)，若還沒有孩子或還不需找共學夥伴可略過本項",-1))),fe=s((()=>(0,t.Lk)("br",null,null,-1))),_e=s((()=>(0,t.Lk)("div",{class:"ui divider"},null,-1))),ye={style:{"margin-left":"15px"}},we=s((()=>(0,t.Lk)("br",null,null,-1))),Ce=s((()=>(0,t.Lk)("br",null,null,-1))),xe=s((()=>(0,t.Lk)("div",{class:"ui divider"},null,-1))),Ge={class:"three fields"},Ue={class:"field"},We=s((()=>(0,t.Lk)("label",{class:"required"},"個人興趣",-1))),Ve={class:"field"},Fe=s((()=>(0,t.Lk)("label",{class:"required"},"可分享",-1))),Je={class:"field"},Ae=s((()=>(0,t.Lk)("label",null,"尋找",-1))),Ie={class:"field"},Te=s((()=>(0,t.Lk)("label",null,"可支付",-1))),Xe={class:"field"},De=s((()=>(0,t.Lk)("label",{class:"required"},"自我介紹",-1))),Ee={class:"ui warning message"},$e={class:"header"},Me=s((()=>(0,t.Lk)("p",null,"愈詳細別人愈能認識您，您的旗幟才好發揮作用。 ",-1))),Qe={class:"ui success message"},je=s((()=>(0,t.Lk)("div",{class:"header"},"謝謝您",-1))),qe=s((()=>(0,t.Lk)("p",null,"您詳細的介紹，讓人能夠更認識您。",-1))),Re=[je,qe],Se={class:"warning"},Ke=s((()=>(0,t.Lk)("i",{class:"red star"},null,-1))),Ne={class:"ui vertical buttons"},Oe=s((()=>(0,t.Lk)("i",{class:"flag icon"},null,-1))),Ze=s((()=>(0,t.Lk)("i",{class:"flag icon"},null,-1))),Be=s((()=>(0,t.Lk)("i",{class:"user icon"},null,-1))),Pe=s((()=>(0,t.Lk)("i",{class:"chevron right icon"},null,-1))),ze=s((()=>(0,t.Lk)("i",{class:"delete icon"},null,-1))),He=s((()=>(0,t.Lk)("br",null,null,-1))),Ye=s((()=>(0,t.Lk)("br",null,null,-1))),el=s((()=>(0,t.Lk)("br",null,null,-1))),ll=s((()=>(0,t.Lk)("br",null,null,-1)));function ol(e,l,o,s,x,G){const V=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)("div",r,[o.isInApp?((0,t.uX)(),(0,t.CE)("p",n,"本系統不支援Facebook, Line等App內部瀏覽，請用一般瀏覽器開啟，方可登入，謝謝")):(0,t.Q3)("",!0),(0,t.bo)((0,t.Lk)("p",null,[(0,t.eW)("請先詳閱我們的"),(0,t.bF)(V,{target:"_blank",to:"/privacy-policy"},{default:(0,t.k6)((()=>[(0,t.eW)("隱私權政策")])),_:1})],512),[[a.aG,!o.users[o.uid]]]),d,o.uid&&!x.root.name&&o.users?((0,t.uX)(),(0,t.CE)("div",{key:1,class:"ui massive blue button",onClick:l[0]||(l[0]=e=>G.setMe())},"按此開始")):(0,t.Q3)("",!0),o.user?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",u,[(0,t.Lk)("button",{class:"ui orange button",onClick:l[1]||(l[1]=(...e)=>G.loginGoogle&&G.loginGoogle(...e))},[c,(0,t.eW)("登入")])])),x.root.name?((0,t.uX)(),(0,t.CE)("div",k,[(0,t.bo)((0,t.Lk)("div",h,[p,G.longTimeNoSee()>.25?((0,t.uX)(),(0,t.CE)("span",m,"您的資料已三個月未更新，請立即更新，謝謝")):G.longTimeNoSee(1)?((0,t.uX)(),(0,t.CE)("span",L,"您的資料已一年未更新，目前已被系統隱藏，請立即更新即可恢復顯示。")):(0,t.Q3)("",!0)],512),[[a.aG,G.longTimeNoSee()>.25]]),(0,t.Lk)("form",b,[g,v,f,(0,t.Lk)("div",_,[y,(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=e=>x.root.name=e),placeholder:"您的大名"},null,512),[[a.Jo,x.root.name]])]),(0,t.Lk)("div",{class:(0,i.C4)(["field",{error:x.root.address&&("undefined,undefined"==x.root.latlngColumn||"36.778261,-119.4179324"==x.root.latlngColumn)}])},[w,(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>x.root.address=e),placeholder:"地址愈詳細，別人愈好認識你的所在"},null,512),[[a.Jo,x.root.address,void 0,{trim:!0}]]),(0,t.bo)((0,t.Lk)("div",C,U,512),[[a.aG,x.root.address&&("undefined,undefined"==x.root.latlngColumn||"36.778261,-119.4179324"==x.root.latlngColumn)]]),(0,t.bo)((0,t.Lk)("div",W,J,512),[[a.aG,G.usedAddr(x.root)]]),(0,t.bo)((0,t.Lk)("div",A,X,512),[[a.aG,G.tooDetail(x.root.address)]])],2),(0,t.Lk)("h4",D,[(0,t.eW)("手動拖拉地圖讓標記移到您的位置附近"),(0,t.Lk)("div",E,"經緯座標： "+(0,i.v_)(x.root.latlngColumn),1)]),$,M,(0,t.Lk)("div",Q,[j,(0,t.Lk)("div",q,[(0,t.Lk)("div",R,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>x.root.site=e),placeholder:"個人網址"},null,512),[[a.Jo,x.root.site]]),(0,t.bo)((0,t.Lk)("span",null,[(0,t.Lk)("a",{href:x.root.site,target:"_blank"},[(0,t.Lk)("img",{src:"https://www.google.com/s2/favicons?domain="+x.root.site,title:"個人網址",alt:"個人網址"},null,8,K),(0,t.eW)("測試連結")],8,S)],512),[[a.aG,x.root.site]])]),(0,t.Lk)("div",N,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[5]||(l[5]=e=>x.root.site2=e),placeholder:"參與的社群網址"},null,512),[[a.Jo,x.root.site2]]),(0,t.bo)((0,t.Lk)("span",null,[(0,t.bo)((0,t.Lk)("a",{href:x.root.site2,target:"_blank"},[(0,t.Lk)("img",{src:"https://www.google.com/s2/favicons?domain="+x.root.site2,title:"社群網址",alt:"社群網址"},null,8,Z),(0,t.eW)("測試連結")],8,O),[[a.aG,x.root.site2]])],512),[[a.aG,x.root.site2]])])])]),(0,t.Lk)("div",B,[(0,t.Lk)("div",P,[z,(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=e=>x.root.connect_me=e),placeholder:"可公開的方式，如e-mail。臉書私訊不可"},null,512),[[a.Jo,x.root.connect_me]])]),(0,t.Lk)("div",H,[Y,(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=e=>x.root.freetime=e),placeholder:"例如：週五下午和週末"},null,512),[[a.Jo,x.root.freetime]])])]),ee,(0,t.Lk)("div",le,[oe,(0,t.bo)((0,t.Lk)("select",{class:"selectpicker","onUpdate:modelValue":l[8]||(l[8]=e=>x.root.learner_role=e)},[te,((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(["自學生","自學家長","獨立教育工作者","自學家長 + 獨立教育工作者","自學生 + 獨立教育工作者","自學生 + 自學家長","自學生 + 自學家長 + 獨立教育工作者"],(e=>(0,t.Lk)("option",{selected:x.root.learner_role==e,value:e},(0,i.v_)(e),9,ae))),64))],512),[[a.u1,x.root.learner_role]])]),(0,t.Lk)("div",ie,[se,(0,t.bo)((0,t.Lk)("select",{class:"selectpicker","onUpdate:modelValue":l[9]||(l[9]=e=>x.root.learner_type=e)},[re,((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(["個人","三五好友","團體共學","類學校機構"],(e=>(0,t.Lk)("option",{selected:x.root.learner_type==e,value:e},(0,i.v_)(e),9,ne))),64))],512),[[a.u1,x.root.learner_type]])]),(0,t.Lk)("div",{class:(0,i.C4)(["field",{error:e.badAge(x.root.learner_birth),warning:!x.root.learner_birth}])},[de,(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[10]||(l[10]=e=>x.root.learner_birth=e),type:"text",placeholder:"您自己的年次，如1976"},null,512),[[a.Jo,x.root.learner_birth]])],2),(0,t.bo)((0,t.Lk)("span",null,"大約"+(0,i.v_)(e.toAge(x.root.learner_birth))+"歲",513),[[a.aG,x.root.learner_birth]]),(0,t.bo)((0,t.Lk)("div",ue,he,512),[[a.aG,!x.root.learner_birth]]),(0,t.bo)((0,t.Lk)("div",pe,be,512),[[a.aG,e.badAge(x.root.learner_birth)]]),(0,t.Lk)("div",ge,[ve,(0,t.Lk)("span",null,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[11]||(l[11]=e=>x.root.child_birth=e),type:"text",placeholder:"最大孩子的出生年次(西元)"},null,512),[[a.Jo,x.root.child_birth]]),fe,(0,t.bo)((0,t.Lk)("span",null,"大約"+(0,i.v_)(e.toAge(x.root.child_birth))+"歲",513),[[a.aG,x.root.child_birth]]),_e,(0,t.Lk)("span",ye,[(0,t.eW)("若您有多位孩子，請再填寫："),we,(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[12]||(l[12]=e=>x.root.child_birth2=e),type:"text",placeholder:"最小孩子的出生年次(西元)"},null,512),[[a.Jo,x.root.child_birth2]]),Ce]),(0,t.bo)((0,t.Lk)("span",null,"大約"+(0,i.v_)(e.toAge(x.root.child_birth2))+"歲~"+(0,i.v_)(e.toAge(x.root.child_birth))+"歲 ",513),[[a.aG,x.root.child_birth2]])]),xe,(0,t.Lk)("div",Ge,[(0,t.Lk)("div",Ue,[We,(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[13]||(l[13]=e=>x.root.learner_habit=e),placeholder:"個人興趣"},null,512),[[a.Jo,x.root.learner_habit]])]),(0,t.Lk)("div",Ve,[Fe,(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[14]||(l[14]=e=>x.root.share=e),placeholder:"知識、服務、場地設備或物資"},null,512),[[a.Jo,x.root.share]])]),(0,t.Lk)("div",Je,[Ae,(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[15]||(l[15]=e=>x.root.ask=e),placeholder:"讓人知道可以協助你什麼?"},null,512),[[a.Jo,x.root.ask]])]),(0,t.Lk)("div",Ie,[Te,(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[16]||(l[16]=e=>x.root.price=e),placeholder:"你願意支付多少錢或換工來得到協助?"},null,512),[[a.Jo,x.root.price]])])]),(0,t.Lk)("div",Xe,[De,(0,t.bo)((0,t.Lk)("textarea",{id:"note","onUpdate:modelValue":l[17]||(l[17]=e=>x.root.note=e),rows:"5",cols:"30",placeholder:"自我介紹很重要，請寫20字以上，謝謝"},null,512),[[a.Jo,x.root.note]])]),(0,t.bo)((0,t.Lk)("div",Ee,[(0,t.Lk)("div",$e,"請再寫"+(0,i.v_)(20-x.root.note.length)+"字介紹您自己",1),Me],512),[[a.aG,x.root.note&&x.root.note.length<20]]),(0,t.bo)((0,t.Lk)("div",Qe,Re,512),[[a.aG,x.root.note&&x.root.note.length>=20]])]),(0,t.bo)((0,t.Lk)("div",Se,[(0,t.eW)("note: 您還有"),Ke,(0,t.eW)("必填項目尚未填寫")],512),[[a.aG,!e.isValid(x.root)]])]),(0,t.bo)((0,t.Lk)("p",null,[(0,t.bo)((0,t.Lk)("input",{class:"ui checkbox",type:"checkbox","onUpdate:modelValue":l[18]||(l[18]=e=>x.agree=e)},null,512),[[a.lH,x.agree]]),(0,t.eW)("我同意自學2.0的"),(0,t.bF)(V,{target:"_blank",to:"/privacy-policy"},{default:(0,t.k6)((()=>[(0,t.eW)("隱私權政策")])),_:1})],512),[[a.aG,!o.users[o.uid]]]),(0,t.Lk)("div",Ne,[(0,t.Lk)("a",{class:(0,i.C4)(["ui large blue button",{disabled:!e.isValid(x.root)}]),onClick:l[19]||(l[19]=(...e)=>G.updateFlag&&G.updateFlag(...e))},[(0,t.bo)((0,t.Lk)("span",null,[Oe,(0,t.eW)("升起旗幟!!")],512),[[a.aG,!o.users[o.uid]]]),(0,t.bo)((0,t.Lk)("span",null,[Ze,(0,t.eW)("更新旗幟!!")],512),[[a.aG,o.users[o.uid]]])],2),o.users[o.uid]?((0,t.uX)(),(0,t.Wv)(V,{key:0,class:"ui large green button",to:"/flag/"+o.uid},{default:(0,t.k6)((()=>[Be,(0,t.eW)("查看專屬名片"),Pe])),_:1},8,["to"])):(0,t.Q3)("",!0),o.users[o.uid]?((0,t.uX)(),(0,t.CE)("div",{key:1,class:"ui large red button",onClick:l[20]||(l[20]=(...e)=>G.confirmDelete&&G.confirmDelete(...e))},[ze,(0,t.eW)("刪除旗幟")])):(0,t.Q3)("",!0)]),He,Ye,el,ll])):(0,t.Q3)("",!0)])}var tl=o(9034),al=o(6808),il=o(4161),sl=o(6886),rl={name:"MyFlag",mixins:[tl.A],props:["uid","user","email","mySearch","provider","photoURL","users","isInApp"],metaInfo:{title:"我的旗幟"},data(){return{agree:!1,myIndex:-1,root:{latlngColumn:"23.5330,121.0654"},local:{},map:null,marker:null}},emit:["loginGoogle","locate"],mounted(){this.$nextTick((()=>{this.root.name&&(sl.Icon.Default.imagePath="//cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/",setTimeout(this.initMap,500))}))},watch:{root(e){e.name&&setTimeout(this.initMap,500)}},methods:{initMap(){this.map=sl.map("map").setView(this.root.latlngColumn.split(","),7),sl.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map),sl.Icon.Default.imagePath="//cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/",this.marker=sl.marker(this.map.getCenter(),{draggable:!1}).addTo(this.map),this.map.on("moveend",(()=>{const{lat:e,lng:l}=this.map.getCenter();this.marker.setLatLng({lat:e,lng:l}),this.root.latlngColumn=`${e.toFixed(5)},${l.toFixed(5)}`,this.$forceUpdate()}))},setMe(){console.log(this.users);const e=Object.keys(this.users);this.root=this.users[this.uid]||{},this.root.email=this.email,this.myIndex=e.indexOf(this.uid),this.uid&&-1===this.myIndex&&(console.log("welcome to 自學2.0"),this.myIndex=this.uid,this.root={name:this.user.providerData[0].displayName||"新朋友",uid:this.uid,email:this.email,connect_me:this.email,photoURL:this.photoURL||"",latlngColumn:"23.5330,121.0654",note:""}),console.log(this.root.name),console.log(this.root),this.$forceUpdate()},longTimeNoSee(){const e=(new Date).getTime();return(e-this.root.lastUpdate)/1e3/3600/24/365.25},usedAddr:function(e){console.log(this.users);var l=this;const o=Object.keys(this.users),t=o.map((function(e){return l.users[e]}));var a,i,s,r,n;for(a=!1,i=0,r=(s=t.filter(d)).length;i<r;++i)if(n=s[i],n.latlngColumn===e.latlngColumn){a=!0;break}return"undefined,undefined"!==e.latlngColumn&&"36.778261,-119.4179324"!==e.latlngColumn||(a=!1),a;function d(l){return l.name!==e.name}},tooDetail:function(e){return!!e&&!!e.match(/(號|樓|F|f)/)},updateFlag:function(){this.root.lastUpdate=(new Date).getTime(),this.agree?(this.myIndex>-1?(0,il.hZ)((0,il.KR)(al.db,"users/"+this.uid),this.root).then(alert("更新成功!")):(console.log("new2"),(0,il.hZ)((0,il.KR)(al.db,"users/"+this.uid),this.root).then(alert("登錄成功!"))),this.$emit("locate",this.root,!1)):window.alert("請先勾選「我同意自學2.0的隱私權政策」")},confirmDelete(){window.confirm("確認您要退出自學2.0並刪除您的互助旗嗎？提醒您，此動作無法恢復")&&this.deleteFlag()},deleteFlag(){(0,il.TF)((0,il.KR)(al.db,"users/"+this.uid)).then(alert("您的互助旗幟已刪除。謝謝您的使用。")).catch((e=>alert("刪除失敗: "+e.message))),this.root={},this.$emit("logout")},loginFB:function(){this.$emit("loginFB")},loginGoogle:function(){this.$emit("loginGoogle")}}},nl=o(1241);const dl=(0,nl.A)(rl,[["render",ol],["__scopeId","data-v-4bc250b2"]]);var ul=dl}}]);
//# sourceMappingURL=profile.cf4a5194.js.map