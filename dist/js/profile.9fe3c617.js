"use strict";(self["webpackChunkauto20_next"]=self["webpackChunkauto20_next"]||[]).push([[138],{9916:function(e,l,o){o.r(l),o.d(l,{default:function(){return ul}});var t=o(6768),a=o(5130),i=o(4232);const s=e=>((0,t.Qi)("data-v-5beb9146"),e=e(),(0,t.jt)(),e),r={class:"hello"},n={key:0},d={key:2,class:"ui huge buttons"},u=s((()=>(0,t.Lk)("i",{class:"google icon"},null,-1))),c={key:3,class:"ui container"},k={class:"ui warning message"},h=s((()=>(0,t.Lk)("div",{class:"header"},"請立即更新",-1))),p={key:0},m={key:1},L={class:"ui form error warning success",id:"main-form"},g=s((()=>(0,t.Lk)("h2",{class:"ui header"},"請填表",-1))),b=s((()=>(0,t.Lk)("div",{class:"sub header"},[(0,t.eW)("為了讓人真的能找到夥伴"),(0,t.Lk)("br"),(0,t.eW)("有標記紅色星號"),(0,t.Lk)("i",{class:"red star"}),(0,t.eW)("的欄位為必填")],-1))),v=s((()=>(0,t.Lk)("h4",{class:"ui dividing header"},"關於我",-1))),f={class:"field"},_=s((()=>(0,t.Lk)("label",{class:"required"},"名字",-1))),w=s((()=>(0,t.Lk)("label",{class:"required"},"概略地址",-1))),y={class:"ui error message"},C=s((()=>(0,t.Lk)("div",{class:"header"},"無法定位",-1))),x=s((()=>(0,t.Lk)("p",null,[(0,t.eW)("如果您有不只一個住處，請填寫一個就好，其他可寫進自我介紹中。"),(0,t.Lk)("br"),(0,t.eW)("若持續無法定位，請"),(0,t.Lk)("a",{href:"https://www.google.com.tw/chrome/browser/desktop/",target:"_blank"},"使用Chrome瀏覽器"),(0,t.eW)("再試一次。")],-1))),G=[C,x],U={class:"ui warning message"},W=s((()=>(0,t.Lk)("div",{class:"header"},"地址重疊",-1))),V=s((()=>(0,t.Lk)("p",null,"有別人使用了這個地址。您可以加上村里或是路段，來使定位更精準",-1))),F=[W,V],J={class:"ui warning message"},A=s((()=>(0,t.Lk)("div",{class:"header"},"地址太詳細了",-1))),I=s((()=>(0,t.Lk)("p",null,"這是公開資料，最細寫到路段即可，請不要寫出門牌號碼。",-1))),T=[A,I],X={class:"ui header"},D={class:"sub header"},E=s((()=>(0,t.Lk)("div",{id:"map",style:{height:"300px"}},null,-1))),$=s((()=>(0,t.Lk)("div",{class:"ui divider"},null,-1))),M={class:"field"},Q=s((()=>(0,t.Lk)("label",null,"網址",-1))),j={class:"two fields"},q={class:"field"},R=["href"],S=["src"],K={class:"field"},N=["href"],O=["src"],Z={class:"two fields"},B={class:"field"},P=s((()=>(0,t.Lk)("label",{class:"required"},"有效聯絡方式",-1))),z={class:"field"},H=s((()=>(0,t.Lk)("label",null,"比較有空的時段",-1))),Y=s((()=>(0,t.Lk)("h4",{class:"ui dividing header"},"社交資訊",-1))),ee={class:"field"},le=s((()=>(0,t.Lk)("label",null,"您的身份",-1))),oe=s((()=>(0,t.Lk)("option",{value:""}," -- 選擇一種自學身份 -- ",-1))),te=["selected","value"],ae={class:"field"},ie=s((()=>(0,t.Lk)("label",null,"主要的自學型態",-1))),se=s((()=>(0,t.Lk)("option",{value:""}," -- 遇擇一種自學型態 -- ",-1))),re=["selected","value"],ne=s((()=>(0,t.Lk)("label",{class:"required"},"您的出生年次(西元)",-1))),de={class:"ui warning message"},ue=s((()=>(0,t.Lk)("div",{class:"header"},"請填出生年份",-1))),ce=s((()=>(0,t.Lk)("p",null,"這是為了尋友用，如果您不願意填真實年份，可以增減1~2歲。",-1))),ke=[ue,ce],he={class:"ui error message"},pe=s((()=>(0,t.Lk)("div",{class:"header"},"無法計算年歲",-1))),me=s((()=>(0,t.Lk)("p",null," 出生年(西元)的欄位僅能填寫數字喔",-1))),Le=[pe,me],ge={class:"field"},be=s((()=>(0,t.Lk)("label",null,"孩子的出生年次(西元)，若還沒有孩子或還不需找共學夥伴可略過本項",-1))),ve=s((()=>(0,t.Lk)("br",null,null,-1))),fe=s((()=>(0,t.Lk)("div",{class:"ui divider"},null,-1))),_e={style:{"margin-left":"15px"}},we=s((()=>(0,t.Lk)("br",null,null,-1))),ye=s((()=>(0,t.Lk)("br",null,null,-1))),Ce=s((()=>(0,t.Lk)("div",{class:"ui divider"},null,-1))),xe={class:"three fields"},Ge={class:"field"},Ue=s((()=>(0,t.Lk)("label",{class:"required"},"個人興趣",-1))),We={class:"field"},Ve=s((()=>(0,t.Lk)("label",{class:"required"},"可分享",-1))),Fe={class:"field"},Je=s((()=>(0,t.Lk)("label",null,"尋找",-1))),Ae={class:"field"},Ie=s((()=>(0,t.Lk)("label",null,"可支付",-1))),Te={class:"field"},Xe=s((()=>(0,t.Lk)("label",{class:"required"},"自我介紹",-1))),De={class:"ui warning message"},Ee={class:"header"},$e=s((()=>(0,t.Lk)("p",null,"愈詳細別人愈能認識您，您的旗幟才好發揮作用。 ",-1))),Me={class:"ui success message"},Qe=s((()=>(0,t.Lk)("div",{class:"header"},"謝謝您",-1))),je=s((()=>(0,t.Lk)("p",null,"您詳細的介紹，讓人能夠更認識您。",-1))),qe=[Qe,je],Re={class:"warning"},Se=s((()=>(0,t.Lk)("i",{class:"red star"},null,-1))),Ke=s((()=>(0,t.Lk)("div",{class:"ui divider"},null,-1))),Ne={class:"ui vertical buttons"},Oe=s((()=>(0,t.Lk)("i",{class:"flag icon"},null,-1))),Ze=s((()=>(0,t.Lk)("i",{class:"flag icon"},null,-1))),Be=s((()=>(0,t.Lk)("i",{class:"user icon"},null,-1))),Pe=s((()=>(0,t.Lk)("i",{class:"chevron right icon"},null,-1))),ze=s((()=>(0,t.Lk)("i",{class:"delete icon"},null,-1))),He=s((()=>(0,t.Lk)("br",null,null,-1))),Ye=s((()=>(0,t.Lk)("br",null,null,-1))),el=s((()=>(0,t.Lk)("br",null,null,-1))),ll=s((()=>(0,t.Lk)("br",null,null,-1)));function ol(e,l,o,s,C,x){const W=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)("div",r,[o.isInApp?((0,t.uX)(),(0,t.CE)("p",n,"本系統不支援Facebook, Line等App內部瀏覽，請用一般瀏覽器開啟，方可登入，謝謝")):(0,t.Q3)("",!0),o.uid&&!C.root.name&&o.users?((0,t.uX)(),(0,t.CE)("div",{key:1,class:"ui massive blue button",onClick:l[0]||(l[0]=e=>x.setMe())},"按此開始")):(0,t.Q3)("",!0),o.user?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",d,[(0,t.Lk)("button",{class:"ui orange button",onClick:l[1]||(l[1]=(...e)=>x.loginGoogle&&x.loginGoogle(...e))},[u,(0,t.eW)("登入")])])),C.root.name?((0,t.uX)(),(0,t.CE)("div",c,[(0,t.bo)((0,t.Lk)("div",k,[h,x.longTimeNoSee()>.25?((0,t.uX)(),(0,t.CE)("span",p,"您的資料已三個月未更新，請立即更新，謝謝")):x.longTimeNoSee(1)?((0,t.uX)(),(0,t.CE)("span",m,"您的資料已一年未更新，目前已被系統隱藏，請立即更新即可恢復顯示。")):(0,t.Q3)("",!0)],512),[[a.aG,x.longTimeNoSee()>.25]]),(0,t.Lk)("form",L,[g,b,v,(0,t.Lk)("div",f,[_,(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=e=>C.root.name=e),placeholder:"您的大名"},null,512),[[a.Jo,C.root.name]])]),(0,t.Lk)("div",{class:(0,i.C4)(["field",{error:C.root.address&&("undefined,undefined"==C.root.latlngColumn||"36.778261,-119.4179324"==C.root.latlngColumn)}])},[w,(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>C.root.address=e),placeholder:"地址愈詳細，別人愈好認識你的所在"},null,512),[[a.Jo,C.root.address,void 0,{trim:!0}]]),(0,t.bo)((0,t.Lk)("div",y,G,512),[[a.aG,C.root.address&&("undefined,undefined"==C.root.latlngColumn||"36.778261,-119.4179324"==C.root.latlngColumn)]]),(0,t.bo)((0,t.Lk)("div",U,F,512),[[a.aG,x.usedAddr(C.root)]]),(0,t.bo)((0,t.Lk)("div",J,T,512),[[a.aG,x.tooDetail(C.root.address)]])],2),(0,t.Lk)("h4",X,[(0,t.eW)("手動拖拉地圖讓標記移到您的位置附近"),(0,t.Lk)("div",D,"經緯座標： "+(0,i.v_)(C.root.latlngColumn),1)]),E,$,(0,t.Lk)("div",M,[Q,(0,t.Lk)("div",j,[(0,t.Lk)("div",q,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>C.root.site=e),placeholder:"個人網址"},null,512),[[a.Jo,C.root.site]]),(0,t.bo)((0,t.Lk)("span",null,[(0,t.Lk)("a",{href:C.root.site,target:"_blank"},[(0,t.Lk)("img",{src:"https://www.google.com/s2/favicons?domain="+C.root.site,title:"個人網址",alt:"個人網址"},null,8,S),(0,t.eW)("測試連結")],8,R)],512),[[a.aG,C.root.site]])]),(0,t.Lk)("div",K,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[5]||(l[5]=e=>C.root.site2=e),placeholder:"參與的社群網址"},null,512),[[a.Jo,C.root.site2]]),(0,t.bo)((0,t.Lk)("span",null,[(0,t.bo)((0,t.Lk)("a",{href:C.root.site2,target:"_blank"},[(0,t.Lk)("img",{src:"https://www.google.com/s2/favicons?domain="+C.root.site2,title:"社群網址",alt:"社群網址"},null,8,O),(0,t.eW)("測試連結")],8,N),[[a.aG,C.root.site2]])],512),[[a.aG,C.root.site2]])])])]),(0,t.Lk)("div",Z,[(0,t.Lk)("div",B,[P,(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=e=>C.root.connect_me=e),placeholder:"可公開的方式，如e-mail。臉書私訊不可"},null,512),[[a.Jo,C.root.connect_me]])]),(0,t.Lk)("div",z,[H,(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=e=>C.root.freetime=e),placeholder:"例如：週五下午和週末"},null,512),[[a.Jo,C.root.freetime]])])]),Y,(0,t.Lk)("div",ee,[le,(0,t.bo)((0,t.Lk)("select",{class:"selectpicker","onUpdate:modelValue":l[8]||(l[8]=e=>C.root.learner_role=e)},[oe,((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(["自學生","自學家長","獨立教育工作者","自學家長 + 獨立教育工作者","自學生 + 獨立教育工作者","自學生 + 自學家長","自學生 + 自學家長 + 獨立教育工作者"],(e=>(0,t.Lk)("option",{selected:C.root.learner_role==e,value:e},(0,i.v_)(e),9,te))),64))],512),[[a.u1,C.root.learner_role]])]),(0,t.Lk)("div",ae,[ie,(0,t.bo)((0,t.Lk)("select",{class:"selectpicker","onUpdate:modelValue":l[9]||(l[9]=e=>C.root.learner_type=e)},[se,((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(["個人","三五好友","團體共學","類學校機構"],(e=>(0,t.Lk)("option",{selected:C.root.learner_type==e,value:e},(0,i.v_)(e),9,re))),64))],512),[[a.u1,C.root.learner_type]])]),(0,t.Lk)("div",{class:(0,i.C4)(["field",{error:e.badAge(C.root.learner_birth),warning:!C.root.learner_birth}])},[ne,(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[10]||(l[10]=e=>C.root.learner_birth=e),type:"text",placeholder:"您自己的年次，如1976"},null,512),[[a.Jo,C.root.learner_birth]])],2),(0,t.bo)((0,t.Lk)("span",null,"大約"+(0,i.v_)(e.toAge(C.root.learner_birth))+"歲",513),[[a.aG,C.root.learner_birth]]),(0,t.bo)((0,t.Lk)("div",de,ke,512),[[a.aG,!C.root.learner_birth]]),(0,t.bo)((0,t.Lk)("div",he,Le,512),[[a.aG,e.badAge(C.root.learner_birth)]]),(0,t.Lk)("div",ge,[be,(0,t.Lk)("span",null,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[11]||(l[11]=e=>C.root.child_birth=e),type:"text",placeholder:"最大孩子的出生年次(西元)"},null,512),[[a.Jo,C.root.child_birth]]),ve,(0,t.bo)((0,t.Lk)("span",null,"大約"+(0,i.v_)(e.toAge(C.root.child_birth))+"歲",513),[[a.aG,C.root.child_birth]]),fe,(0,t.Lk)("span",_e,[(0,t.eW)("若您有多位孩子，請再填寫："),we,(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[12]||(l[12]=e=>C.root.child_birth2=e),type:"text",placeholder:"最小孩子的出生年次(西元)"},null,512),[[a.Jo,C.root.child_birth2]]),ye]),(0,t.bo)((0,t.Lk)("span",null,"大約"+(0,i.v_)(e.toAge(C.root.child_birth2))+"歲~"+(0,i.v_)(e.toAge(C.root.child_birth))+"歲 ",513),[[a.aG,C.root.child_birth2]])]),Ce,(0,t.Lk)("div",xe,[(0,t.Lk)("div",Ge,[Ue,(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[13]||(l[13]=e=>C.root.learner_habit=e),placeholder:"個人興趣"},null,512),[[a.Jo,C.root.learner_habit]])]),(0,t.Lk)("div",We,[Ve,(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[14]||(l[14]=e=>C.root.share=e),placeholder:"知識、服務、場地設備或物資"},null,512),[[a.Jo,C.root.share]])]),(0,t.Lk)("div",Fe,[Je,(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[15]||(l[15]=e=>C.root.ask=e),placeholder:"讓人知道可以協助你什麼?"},null,512),[[a.Jo,C.root.ask]])]),(0,t.Lk)("div",Ae,[Ie,(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[16]||(l[16]=e=>C.root.price=e),placeholder:"你願意支付多少錢或換工來得到協助?"},null,512),[[a.Jo,C.root.price]])])]),(0,t.Lk)("div",Te,[Xe,(0,t.bo)((0,t.Lk)("textarea",{id:"note","onUpdate:modelValue":l[17]||(l[17]=e=>C.root.note=e),rows:"5",cols:"30",placeholder:"自我介紹很重要，請寫20字以上，謝謝"},null,512),[[a.Jo,C.root.note]])]),(0,t.bo)((0,t.Lk)("div",De,[(0,t.Lk)("div",Ee,"請再寫"+(0,i.v_)(20-C.root.note.length)+"字介紹您自己",1),$e],512),[[a.aG,C.root.note&&C.root.note.length<20]]),(0,t.bo)((0,t.Lk)("div",Me,qe,512),[[a.aG,C.root.note&&C.root.note.length>=20]])]),(0,t.bo)((0,t.Lk)("div",Re,[(0,t.eW)("note: 您還有"),Se,(0,t.eW)("必填項目尚未填寫")],512),[[a.aG,!e.isValid(C.root)]])]),Ke,(0,t.bo)((0,t.Lk)("p",null,[(0,t.eW)("請先詳閱我們的"),(0,t.bF)(W,{target:"_blank",to:"/privacy-policy"},{default:(0,t.k6)((()=>[(0,t.eW)("隱私權政策")])),_:1})],512),[[a.aG,!o.users[o.uid]]]),(0,t.Lk)("div",Ne,[(0,t.Lk)("a",{class:(0,i.C4)(["ui large blue button",{disabled:!e.isValid(C.root)}]),onClick:l[18]||(l[18]=(...e)=>x.updateFlag&&x.updateFlag(...e))},[(0,t.bo)((0,t.Lk)("span",null,[Oe,(0,t.eW)("升起旗幟!!")],512),[[a.aG,!o.users[o.uid]]]),(0,t.bo)((0,t.Lk)("span",null,[Ze,(0,t.eW)("更新旗幟!!")],512),[[a.aG,o.users[o.uid]]])],2),o.users[o.uid]?((0,t.uX)(),(0,t.Wv)(W,{key:0,class:"ui large green button",to:"/flag/"+o.uid},{default:(0,t.k6)((()=>[Be,(0,t.eW)("查看專屬名片"),Pe])),_:1},8,["to"])):(0,t.Q3)("",!0),o.users[o.uid]?((0,t.uX)(),(0,t.CE)("div",{key:1,class:"ui large red button",onClick:l[19]||(l[19]=(...e)=>x.confirmDelete&&x.confirmDelete(...e))},[ze,(0,t.eW)("刪除旗幟")])):(0,t.Q3)("",!0)]),He,Ye,el,ll])):(0,t.Q3)("",!0)])}var tl=o(9034),al=o(6808),il=o(4161),sl=o(6886),rl={name:"MyFlag",mixins:[tl.A],props:["uid","user","email","mySearch","provider","photoURL","users","isInApp"],metaInfo:{title:"我的旗幟"},data(){return{myIndex:-1,root:{latlngColumn:"23.5330,121.0654"},local:{},map:null,marker:null}},emit:["loginGoogle","locate"],mounted(){this.$nextTick((()=>{this.root.name&&(sl.Icon.Default.imagePath="//cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/",setTimeout(this.initMap,500))}))},watch:{root(e){e.name&&setTimeout(this.initMap,500)}},methods:{initMap(){this.map=sl.map("map").setView(this.root.latlngColumn.split(","),7),sl.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map),sl.Icon.Default.imagePath="//cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/",this.marker=sl.marker(this.map.getCenter(),{draggable:!1}).addTo(this.map),this.map.on("moveend",(()=>{const{lat:e,lng:l}=this.map.getCenter();this.marker.setLatLng({lat:e,lng:l}),this.root.latlngColumn=`${e.toFixed(5)},${l.toFixed(5)}`,this.$forceUpdate()}))},setMe(){console.log(this.users);const e=Object.keys(this.users);this.root=this.users[this.uid]||{},this.root.email=this.email,console.log(this.root.email),this.myIndex=e.indexOf(this.uid),this.uid&&-1===this.myIndex&&(console.log("new"),this.myIndex=this.uid,this.root={name:this.user.providerData[0].displayName||"新朋友",uid:this.uid,email:this.email,photoURL:this.photoURL||"",latlngColumn:"23.5330,121.0654",note:""}),console.log(this.root.name),console.log(this.root),this.$forceUpdate()},longTimeNoSee(){const e=(new Date).getTime();return(e-this.root.lastUpdate)/1e3/3600/24/365.25},usedAddr:function(e){console.log(this.users);var l=this;const o=Object.keys(this.users),t=o.map((function(e){return l.users[e]}));var a,i,s,r,n;for(a=!1,i=0,r=(s=t.filter(d)).length;i<r;++i)if(n=s[i],n.latlngColumn===e.latlngColumn){a=!0;break}return"undefined,undefined"!==e.latlngColumn&&"36.778261,-119.4179324"!==e.latlngColumn||(a=!1),a;function d(l){return l.name!==e.name}},tooDetail:function(e){return!!e&&!!e.match(/(號|樓|F|f)/)},updateFlag:function(){this.root.lastUpdate=(new Date).getTime(),this.myIndex>-1?(0,il.hZ)((0,il.KR)(al.db,"users/"+this.uid),this.root).then(alert("更新成功!")):(console.log("new2"),(0,il.hZ)((0,il.KR)(al.db,"users/"+this.uid),this.root).then(alert("登錄成功!"))),this.$emit("locate",this.root,!1)},confirmDelete(){window.confirm("確認您要退出自學2.0並刪除您的互助旗嗎？提醒您，此動作無法恢復")&&this.deleteFlag()},deleteFlag(){(0,il.TF)((0,il.KR)(al.db,"users/"+this.uid)).then(alert("您的互助旗幟已刪除。謝謝您的使用。")).catch((e=>alert("刪除失敗: "+e.message))),this.root={},this.$emit("logout")},loginFB:function(){this.$emit("loginFB")},loginGoogle:function(){this.$emit("loginGoogle")}}},nl=o(1241);const dl=(0,nl.A)(rl,[["render",ol],["__scopeId","data-v-5beb9146"]]);var ul=dl}}]);
//# sourceMappingURL=profile.9fe3c617.js.map