"use strict";(self["webpackChunkauto20_next"]=self["webpackChunkauto20_next"]||[]).push([[583],{1589:function(s,e,t){t.r(e),t.d(e,{default:function(){return ts}});var o=t(6768),i=t(4232),u=t(5130);const r=s=>((0,o.Qi)("data-v-1d692cb0"),s=s(),(0,o.jt)(),s),n={class:"hello"},l={key:0,class:"ui container"},a={class:"ui grid"},d={key:0,class:"ui one column row"},p={class:"ui column ui segment"},g=r((()=>(0,o.Lk)("br",{class:"thin-only"},null,-1))),h=r((()=>(0,o.Lk)("i",{class:"edit icon"},null,-1))),c=r((()=>(0,o.Lk)("i",{class:"globe icon"},null,-1))),m={class:"ui form"},k={key:0,class:"field"},b=r((()=>(0,o.Lk)("i",{class:"google icon"},null,-1))),v={class:"field"},L={class:"ui labeled input"},_={class:"ui label"},f=["placeholder"],$={class:"field"},w={class:"ui grid"},C={class:"row"},x=["src"],y={class:"two column stackable row"},R={class:"column"},I={class:"ui divided list"},N={class:"item left aligned"},E=["href"],X=["src","alt"],G={class:"item ui form"},K={class:"field"},U={class:"ui labeled input"},W={class:"ui label"},Z=["placeholder"],j={class:"field"},H={class:"ui labeled input"},Q={class:"ui label"},M=["placeholder"],O={class:"field"},F={class:"column"},J={class:"ui divided list"},V=["src"],S={key:0,class:"item ui form"},B={class:"field"},D={class:"ui labeled input"},A=["src"],T=["placeholder"];function Y(s,e,t,r,Y,q){const z=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",n,[s.users&&s.toList(s.users).length>0&&s.groups[s.$route.params.idx]?((0,o.uX)(),(0,o.CE)("div",l,[(0,o.Lk)("div",a,[s.groups[s.$route.params.idx].n?((0,o.uX)(),(0,o.CE)("div",d,[(0,o.Lk)("div",p,[(0,o.Lk)("h3",null,"〈"+(0,i.v_)(s.groups[s.$route.params.idx].n)+"〉",1),(0,o.Lk)("p",null,[(0,o.eW)((0,i.v_)(s.groups[s.$route.params.idx].intro),1),g,(0,o.eW)("    "),(0,o.Lk)("a",{onClick:e[0]||(e[0]=e=>s.toggleEdit(s.$route.params.idx))},[h,(0,o.eW)((0,i.v_)(s.edit?s.$t("login.end"):"")+(0,i.v_)(s.$t("group.edit_group")),1)])]),(0,o.Lk)("p",null,[(0,o.bF)(z,{class:"ui basic green button",to:"/groups"},{default:(0,o.k6)((()=>[c,(0,o.eW)((0,i.v_)(s.$t("group.explore_groups")),1)])),_:1})]),(0,o.bo)((0,o.Lk)("div",m,[s.uid?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",k,[(0,o.Lk)("button",{class:"ui orange button",onClick:e[1]||(e[1]=e=>s.loginGoogle())},[b,(0,o.eW)((0,i.v_)(s.$t("login.login_first")),1)])])),(0,o.Lk)("div",v,[(0,o.Lk)("div",L,[(0,o.Lk)("label",_,(0,i.v_)(s.$t("group.enter_intro")),1),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=e=>s.newIntro=e),placeholder:s.$t("group.enter_intro_first")},null,8,f),[[u.Jo,s.newIntro]])])]),(0,o.Lk)("div",$,[(0,o.Lk)("a",{class:(0,i.C4)(["ui green button",{disabled:!s.newIntro}]),onClick:e[3]||(e[3]=e=>s.addIntro(s.$route.params.idx))},(0,i.v_)(s.$t("group.update_intro")),3)])],512),[[u.aG,s.edit]]),(0,o.Lk)("div",w,[(0,o.Lk)("div",C,[(0,o.Lk)("p",null,[(0,o.eW)("成員："),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.groups[s.$route.params.idx].members,(e=>((0,o.uX)(),(0,o.CE)("span",null,[s.users[e]?((0,o.uX)(),(0,o.Wv)(z,{key:0,to:"/flag/"+e},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{class:"ui avatar",src:s.users[e].photoURL,alt:"users[m].n"},null,8,x)])),_:2},1032,["to"])):(0,o.Q3)("",!0)])))),256)),(0,o.bo)((0,o.Lk)("span",null,[(0,o.bo)((0,o.Lk)("a",{class:"ui green tiny button",onClick:e[4]||(e[4]=e=>s.join(s.groups[s.$route.params.idx].idx))},(0,i.v_)(s.$t("groups.join_group")),513),[[u.aG,!s.isMember(s.groups[s.$route.params.idx].idx)]]),(0,o.bo)((0,o.Lk)("a",{class:"ui red tiny button",onClick:e[5]||(e[5]=e=>s.out(s.groups[s.$route.params.idx].idx))},(0,i.v_)(s.$t("groups.out_group")),513),[[u.aG,s.isMember(s.groups[s.$route.params.idx].idx)]])],512),[[u.aG,s.uid]])])]),(0,o.Lk)("div",y,[(0,o.Lk)("div",R,[(0,o.Lk)("div",I,[(0,o.Lk)("div",N,(0,i.v_)(s.$t("group.resources")),1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.groups[s.$route.params.idx].res,((s,e)=>((0,o.uX)(),(0,o.CE)("div",{class:"item left aligned",key:e+s.n+s.href},[(0,o.Lk)("a",{href:s.href,target:"_blank",rel:"noopener noreferrer"},[(0,o.Lk)("img",{src:"http://www.google.com/s2/favicons?domain="+s.href,alt:s.n},null,8,X),(0,o.eW)((0,i.v_)(s.n),1)],8,E)])))),128)),(0,o.bo)((0,o.Lk)("div",G,[(0,o.Lk)("div",K,[(0,o.Lk)("div",U,[(0,o.Lk)("label",W,(0,i.v_)(s.$t("group.enter_resource")),1),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=e=>s.newResName=e),placeholder:s.$t("group.enter_resource_first")},null,8,Z),[[u.Jo,s.newResName]])])]),(0,o.Lk)("div",j,[(0,o.Lk)("div",H,[(0,o.Lk)("label",Q,(0,i.v_)(s.$t("group.enter_link")),1),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=e=>s.newHref=e),placeholder:s.$t("group.enter_link_first")},null,8,M),[[u.Jo,s.newHref]])])]),(0,o.Lk)("div",O,[(0,o.Lk)("a",{class:(0,i.C4)(["ui green button",{disabled:!s.newHref||!s.newResName}]),onClick:e[8]||(e[8]=e=>s.addRes(s.$route.params.idx))},(0,i.v_)(s.$t("group.add_resource")),3)])],512),[[u.aG,s.uid&&s.edit]])])]),(0,o.Lk)("div",F,[(0,o.eW)((0,i.v_)(s.$t("login.leave_messages")),1),(0,o.Lk)("div",J,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.latestChats,((s,e)=>((0,o.uX)(),(0,o.CE)("div",{class:"item",key:e},[(0,o.Lk)("img",{class:"ui avatar",src:s.photoURL},null,8,V),(0,o.eW)((0,i.v_)(s.n)+" : "+(0,i.v_)(s.t),1)])))),128)),s.uid?((0,o.uX)(),(0,o.CE)("div",S,[(0,o.Lk)("div",B,[(0,o.Lk)("div",D,[(0,o.Lk)("img",{class:"ui avatar",src:s.photoURL},null,8,A),(0,o.bo)((0,o.Lk)("input",{class:"input","onUpdate:modelValue":e[9]||(e[9]=e=>s.msg=e),placeholder:s.$t("group.anything_to_say")},null,8,T),[[u.Jo,s.msg]]),(0,o.Lk)("a",{class:(0,i.C4)(["ui label green button",{disabled:!s.msg}]),onClick:e[10]||(e[10]=e=>s.addChat(s.$route.params.idx))},(0,i.v_)(s.$t("login.leave_messages")),3)])])])):(0,o.Q3)("",!0)])])])])])])):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0)])}t(4114);var q=t(4161),z=t(6808),P=(0,o.pM)({name:"GroupsView",props:["photoURL","users","user","uid","mySearch"],metaInfo:{title:"$t('login.auto_gp')"},data(){return{edit:!1,newIntro:"",newName:"",newResName:"",newHref:"",msg:"",groups:[]}},computed:{latestChats(){const s=this.$route.params.idx,e=this.groups[s]?.chats||[];return e.slice(-10)}},methods:{toggleEdit(s){this.edit=!this.edit,this.edit?this.newIntro=this.groups[s].intro:this.newIntro=""},toList:s=>s&&"object"===typeof s?Object.values(s):[],loginGoogle:function(){this.$emit("loginGoogle")},isMember(s){return(this.groups[s].members||[]).indexOf(this.uid)>-1},join(s){this.groups[s].members=this.groups[s].members||[],this.groups[s].members.push(this.uid),(0,q.hZ)((0,q.KR)(z.db,"groups"),this.groups).then(console.log(this.$t("groups.update_sucess")))},out(s){this.groups[s].members=this.groups[s].members||[],this.groups[s].members=this.groups[s].members.filter((s=>s!==this.uid)),(0,q.hZ)((0,q.KR)(z.db,"groups"),this.groups).then(console.log(this.$t("groups.update_sucess")))},searchBy(s,e){return e?s.filter((function(s){return JSON.stringify(s).indexOf(e)>-1})):s},addChat(s){var e={uid:this.uid,n:this.users[this.uid].name?this.users[this.uid].name:this.$t("login.anoymous"),t:this.msg,photoURL:this.photoURL||"",time:(new Date).getTime()},t=this.groups[s].chats?[...this.groups[s].chats]:[];this.msg&&(t.push(e),this.msg=""),(0,q.hZ)((0,q.KR)(z.db,"groups/"+s+"/chats"),t).then(console.log(this.$t("groups.update_sucess")))},addGroup(){this.groups.push({n:this.newName,res:[],chats:[],idx:this.groups.length}),this.newName="",(0,q.hZ)((0,q.KR)(z.db,"groups"),this.groups).then(console.log(this.$t("groups.update_sucess")))},addRes(s){this.groups[s].res=this.groups[s].res||[],this.groups[s].res.push({n:this.newResName,href:this.newHref}),this.newResName="",this.newHref="",(0,q.hZ)((0,q.KR)(z.db,"groups"),this.groups).then(console.log(this.$t("groups.update_sucess")))},addIntro(s){this.newIntro.trim().length&&(this.groups[s].intro=this.newIntro,(0,q.hZ)((0,q.KR)(z.db,"groups/"+s),this.groups[s]).then((()=>console.log(this.$t("login.update_sucess")))).catch((s=>{console.error(this.$t("login.update_failed"),s)})),this.newIntro="")}},mounted(){(0,q.Zy)(z.sY,(s=>{const e=s.val();this.groups=e||[]}))}}),ss=t(1241);const es=(0,ss.A)(P,[["render",Y],["__scopeId","data-v-1d692cb0"]]);var ts=es},5562:function(s,e,t){t.r(e),t.d(e,{default:function(){return X}});var o=t(6768),i=t(4232),u=t(5130);const r=s=>((0,o.Qi)("data-v-360f0ae0"),s=s(),(0,o.jt)(),s),n={class:"hello"},l={key:0,class:"ui container"},a={class:"ui grid"},d={class:"row ui form"},p={class:"field"},g={class:"ui labeled input"},h={class:"ui label"},c=["placeholder"],m={class:"field"},k={class:"ui two stackable column row"},b=r((()=>(0,o.Lk)("br",{class:"thin-only"},null,-1))),v={class:"ui buttons"},L=r((()=>(0,o.Lk)("i",{class:"sign-in icon"},null,-1))),_=["onClick"],f=["onClick"],$={class:"ui grid"},w={class:"row"},C=["src"];function x(s,e,t,r,x,y){const R=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",n,[s.users&&s.toList(s.users).length>0?((0,o.uX)(),(0,o.CE)("div",l,[(0,o.Lk)("div",a,[(0,o.bo)((0,o.Lk)("div",d,[(0,o.Lk)("div",p,[(0,o.Lk)("div",g,[(0,o.Lk)("label",h,(0,i.v_)(s.$t("groups.group_name")),1),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=e=>s.newName=e),placeholder:s.$t("groups.enter_group_name")},null,8,c),[[u.Jo,s.newName]])])]),(0,o.Lk)("div",m,[(0,o.Lk)("a",{class:(0,i.C4)(["ui green button",{disabled:!s.newName}]),onClick:e[1]||(e[1]=e=>s.addGroup())},(0,i.v_)(s.$t("groups.create_group")),3)])],512),[[u.aG,s.uid]]),(0,o.Lk)("div",k,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.searchBy(s.groups,s.mySearch),((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"ui eight wide column ui segment",key:e.idx},[(0,o.Lk)("h3",null,"〈"+(0,i.v_)(e.n)+"〉",1),(0,o.Lk)("p",null,[(0,o.eW)((0,i.v_)(e.intro),1),b,(0,o.eW)("    ")]),(0,o.Lk)("p",null,[(0,o.Lk)("div",v,[(0,o.bF)(R,{class:"ui basic green button",to:"/group/"+e.idx},{default:(0,o.k6)((()=>[L,(0,o.eW)((0,i.v_)(s.$t("groups.go_group")),1)])),_:2},1032,["to"]),(0,o.bo)((0,o.Lk)("a",{class:"ui green button",onClick:t=>s.join(e.idx)},(0,i.v_)(s.$t("groups.join_group")),9,_),[[u.aG,s.uid&&!s.isMember(e.idx)]]),(0,o.bo)((0,o.Lk)("a",{class:"ui red basic button",onClick:t=>s.out(e.idx)},(0,i.v_)(s.$t("groups.out_group")),9,f),[[u.aG,s.uid&&s.isMember(e.idx)]])])]),(0,o.Lk)("div",$,[(0,o.Lk)("div",w,[(0,o.Lk)("p",null,[(0,o.eW)((0,i.v_)(s.$t("groups.members")),1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.members,(e=>((0,o.uX)(),(0,o.CE)("span",null,[s.users[e]?((0,o.uX)(),(0,o.Wv)(R,{key:0,to:"/flag/"+e},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{class:"ui avatar",src:s.users[e].photoURL,alt:"users[m].n"},null,8,C)])),_:2},1032,["to"])):(0,o.Q3)("",!0)])))),256))])])])])))),128))])])])):(0,o.Q3)("",!0)])}t(4114);var y=t(4161),R=t(6808),I=(0,o.pM)({name:"GroupsView",props:["photoURL","users","user","uid","mySearch"],metaInfo:{title:"$t('login.auto_gp')"},data(){return{edit:!1,newIntro:"",newName:"",newResName:"",newHref:"",msg:"",groups:[]}},methods:{toList:s=>s&&"object"===typeof s?Object.values(s):[],loginGoogle:function(){this.$emit("loginGoogle")},isMember(s){return(this.groups[s].members||[]).indexOf(this.uid)>-1},join(s){this.groups[s].members=this.groups[s].members||[],this.groups[s].members.push(this.uid),(0,y.hZ)((0,y.KR)(R.db,"groups"),this.groups).then(console.log(this.$t("groups.update_sucess")))},out(s){window.confirm(this.$t("groups.out_confirm"))&&(this.groups[s].members=this.groups[s].members||[],this.groups[s].members=this.groups[s].members.filter((s=>s!==this.uid)),(0,y.hZ)((0,y.KR)(R.db,"groups"),this.groups).then(console.log(this.$t("groups.update_sucess"))))},searchBy(s,e){return e?s.filter((function(s){return JSON.stringify(s).indexOf(e)>-1})):s},addChat(s){var e={uid:this.uid,n:(this.user.providerData||[{displayName:this.$t("login.anoymous")}])[0].displayName,t:this.msg,photoURL:this.photoURL||"",time:(new Date).getTime()};this.groups[s].chats=this.groups[s].chats||[],this.msg&&(this.groups[s].chats.push(e),this.msg=""),(0,y.hZ)((0,y.KR)(R.db,"groups/"+s),this.g).then(console.log(this.$t("groups.update_sucess")))},addGroup(){this.groups.push({n:this.newName,res:[],chats:[],idx:this.groups.length}),this.newName="",(0,y.hZ)((0,y.KR)(R.db,"groups"),this.groups).then(console.log(this.$t("groups.update_sucess")))},addRes(s){this.groups[s].res=this.groups[s].res||[],this.groups[s].res.push({n:this.newResName,href:this.newHref}),this.newResName="",this.newHref="",(0,y.hZ)((0,y.KR)(R.db,"groups"),this.groups).then(console.log(this.$t("groups.update_sucess")))},addIntro(s){this.groups[s].intro=this.newIntro,this.newIntro="",(0,y.hZ)((0,y.KR)(R.db,"groups"),this.groups).then(console.log(this.$t("groups.update_sucess")))}},mounted(){(0,y.Zy)(R.sY,(s=>{const e=s.val();this.groups=e||[]}))}}),N=t(1241);const E=(0,N.A)(I,[["render",x],["__scopeId","data-v-360f0ae0"]]);var X=E}}]);
//# sourceMappingURL=groups.d826139c.js.map