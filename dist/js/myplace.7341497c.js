"use strict";(self["webpackChunkauto20_next"]=self["webpackChunkauto20_next"]||[]).push([[246],{5862:function(e,t,a){a.r(t),a.d(t,{default:function(){return K}});var l=a(6768),o=a(5130);const s=e=>((0,l.Qi)("data-v-29f4f6f6"),e=e(),(0,l.jt)(),e),i={class:"hello"},n={key:0,class:"ui container"},r={class:"ui form error warning success",id:"main-form"},d=s((()=>(0,l.Lk)("h2",{class:"ui header"},"請填表",-1))),u=s((()=>(0,l.Lk)("div",{class:"sub header"},[(0,l.eW)("為了讓人真的能找到夥伴"),(0,l.Lk)("br"),(0,l.eW)("有標記紅色星號"),(0,l.Lk)("i",{class:"red star"}),(0,l.eW)("的欄位為必填")],-1))),c=s((()=>(0,l.Lk)("h4",{class:"ui dividing header"},"關於場地",-1))),m={class:"field"},p=s((()=>(0,l.Lk)("label",{class:"required"},"地名",-1))),h={class:"field"},k=s((()=>(0,l.Lk)("label",{class:"required"},"概略地址",-1))),L=s((()=>(0,l.Lk)("div",{id:"map",style:{height:"300px"}}," // Add the map container",-1))),g=["innerHTML"],f={class:"ui error message"},b=s((()=>(0,l.Lk)("div",{class:"header"},"無法定位",-1))),v=s((()=>(0,l.Lk)("p",null,[(0,l.eW)("如果地場有不只一個位置，請填寫一個就好，其他可寫進介紹中。"),(0,l.Lk)("br"),(0,l.eW)("若持續無法定位，請"),(0,l.Lk)("a",{href:"https://www.google.com.tw/chrome/browser/desktop/",target:"_blank"},"使用Chrome瀏覽器"),(0,l.eW)("再試一次。")],-1))),w=[b,v],C={class:"ui warning message"},x=s((()=>(0,l.Lk)("div",{class:"header"},"地址重疊",-1))),y=s((()=>(0,l.Lk)("p",null,"有別人使用了這個地址。您可以加上村里或是路段，來使定位更精準",-1))),M=[x,y],T=s((()=>(0,l.Lk)("div",{class:"ui divider"},null,-1))),_={class:"field"},U=s((()=>(0,l.Lk)("label",null,"網址",-1))),W={class:"two fields"},$={class:"field"},j=["href"],G=["src"],P={class:"two fields"},V={class:"field"},A=s((()=>(0,l.Lk)("label",{class:"required"},"有效聯絡方式",-1))),F=s((()=>(0,l.Lk)("div",{class:"ui divider"},null,-1))),J={class:"field"},q=s((()=>(0,l.Lk)("label",{class:"required"},"介紹",-1))),D=s((()=>(0,l.Lk)("div",{class:"ui divider"},null,-1))),I=s((()=>(0,l.Lk)("span",null,"升起旗幟!!",-1))),B=[I];function E(e,t,a,s,b,v){return(0,l.uX)(),(0,l.CE)("div",i,[e.uid?((0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("form",r,[d,u,c,(0,l.Lk)("div",m,[p,(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.root.name=t),placeholder:"場地名稱"},null,512),[[o.Jo,e.root.name]])]),(0,l.Lk)("div",h,[k,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.root.address=t),placeholder:"地址愈詳細，別人愈好認識你的所在"},null,512),[[o.Jo,e.root.address,void 0,{trim:!0}]]),L,(0,l.bo)((0,l.Lk)("span",null,[(0,l.Lk)("span",{innerHTML:e.root.latlngColumn},null,8,g)],512),[[o.aG,e.root.latlngColumn]]),(0,l.bo)((0,l.Lk)("div",f,w,512),[[o.aG,!e.root.latlngColumn]]),(0,l.bo)((0,l.Lk)("div",C,M,512),[[o.aG,e.usedAddr(e.root)]])]),T,(0,l.Lk)("div",_,[U,(0,l.Lk)("div",W,[(0,l.Lk)("div",$,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.root.site=t),placeholder:"場地網址"},null,512),[[o.Jo,e.root.site]]),(0,l.bo)((0,l.Lk)("span",null,[(0,l.Lk)("a",{href:e.root.site,target:"_blank"},[(0,l.Lk)("img",{src:"http://www.google.com/s2/favicons?domain="+e.root.site,title:"場地網址",alt:"場地網址"},null,8,G),(0,l.eW)("測試連結")],8,j)],512),[[o.aG,e.root.site]])])])]),(0,l.Lk)("div",P,[(0,l.Lk)("div",V,[A,(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.root.connect_me=t),placeholder:"可公開的方式，如e-mail。臉書私訊不可"},null,512),[[o.Jo,e.root.connect_me]])]),F,(0,l.Lk)("div",J,[q,(0,l.bo)((0,l.Lk)("textarea",{id:"note","onUpdate:modelValue":t[4]||(t[4]=t=>e.root.note=t),rows:"5",cols:"30",placeholder:"介紹很重要，請寫20字以上，謝謝"},null,512),[[o.Jo,e.root.note]])])])]),D,(0,l.Lk)("a",{class:"ui large blue button",onClick:t[5]||(t[5]=(...t)=>e.updatePlace&&e.updatePlace(...t))},B)])):(0,l.Q3)("",!0)])}var H=a(6886),O=a.n(H),Q=a(6808),R=a(8632),S=a(4161),X=(0,l.pM)({name:"MyPlace",mixins:[R.A],props:["uid","user","mySearch","photoURL","users","places"],data(){return{myIndex:-1,root:{latlngColumn:""},local:{},map:null,marker:null}},mounted(){this.$nextTick((()=>{this.uid&&(O().Icon.Default.imagePath="//cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/",setTimeout(this.initMap,500))}))},watch:{uid:function(e){e&&(O().Icon.Default.imagePath="//cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/",setTimeout(this.initMap,500))}},methods:{initMap(){const e=[23.533,121.0654];this.map=O().map("map").setView(e,7),O().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map),this.marker=O().marker(this.map.getCenter(),{draggable:!1}).addTo(this.map),this.root.latlngColumn=`${e[0]},${e[1]}`,this.map.on("moveend",(()=>{const{lat:e,lng:t}=this.map.getCenter();this.marker.setLatLng(new(O().LatLng)(e,t)),this.root.latlngColumn=`${e.toFixed(5)},${t.toFixed(5)}`}))},usedAddr(e){const t=Object.keys(this.users||{}),a=t.map((e=>this.users[e]));var l=!1;for(let o of a)if(o.latlngColumn===e.latlngColumn){l=!0;break}return l},tooDetail(e){return!!e.match(/(號|樓|F|f)/)},updatePlace(){window.prompt("場地一旦登錄後無法手動更新和移除，確定要登錄嗎？")&&(this.root.lastUpdate=(new Date).getTime(),(0,S.hZ)((0,S.KR)(Q.db,"places/"+this.places.length),this.root).then((()=>alert("登錄成功!"))))},loginFB(){this.$emit("loginFB")},loginGoogle(){this.$emit("loginGoogle")}}}),Z=a(1241);const z=(0,Z.A)(X,[["render",E],["__scopeId","data-v-29f4f6f6"]]);var K=z}}]);
//# sourceMappingURL=myplace.7341497c.js.map